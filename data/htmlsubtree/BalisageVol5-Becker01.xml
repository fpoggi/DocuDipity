<div id="mainContainerTOC">
   <div id="mainContainerTitleTOC" onclick="$('#mainContainerEntriesTOC').toggle('1000');">Table of Content</div>
   <div id="mainContainerEntriesTOC" style="display:none;">
      <div class="headedContainerTOC">
         <div class="headedContainerTitleTOC"><a href="#XMLEssenceTestingANCHOR" name="XMLEssenceTestingTOC">XML Essence Testing</a></div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#IntroductionANCHOR" name="IntroductionTOC">Introduction</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#OverviewofthePMCXMLProcessingModelANCHOR" name="OverviewofthePMCXMLProcessingModelTOC">Overview of the PMC XML Processing Model</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#MethodsANCHOR" name="MethodsTOC">Methods</a></div>
            <div class="headedContainerTOC">
               <div class="headedContainerTitleTOC"><a href="#TheEssenceTestingProcessANCHOR" name="TheEssenceTestingProcessTOC">The Essence Testing Process</a></div>
               <div class="headedContainerTOC">
                  <div class="headedContainerTitleTOC"><a href="#TrackingANCHOR" name="TrackingTOC">Tracking</a></div>
               </div>
               <div class="headedContainerTOC">
                  <div class="headedContainerTitleTOC"><a href="#DefiningtheDocument'sEssenceANCHOR" name="DefiningtheDocument'sEssenceTOC">Defining the Document's Essence</a></div>
                  <div class="headedContainerTOC">
                     <div class="headedContainerTitleTOC"><a href="#EssenceXMLExtractorStyleSheetANCHOR" name="EssenceXMLExtractorStyleSheetTOC">Essence XML Extractor Style Sheet</a></div>
                  </div>
               </div>
               <div class="headedContainerTOC">
                  <div class="headedContainerTitleTOC"><a href="#EssenceTestingWorkflowANCHOR" name="EssenceTestingWorkflowTOC">Essence Testing Work flow</a></div>
               </div>
               <div class="headedContainerTOC">
                  <div class="headedContainerTitleTOC"><a href="#ComparingEssenceXMLDocumentsANCHOR" name="ComparingEssenceXMLDocumentsTOC">Comparing Essence XML Documents</a></div>
               </div>
               <div class="headedContainerTOC">
                  <div class="headedContainerTitleTOC"><a href="#EssenceReportANCHOR" name="EssenceReportTOC">Essence Report</a></div>
               </div>
            </div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#ResultsANCHOR" name="ResultsTOC">Results</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#DiscussionANCHOR" name="DiscussionTOC">Discussion</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#AcknowledgementsANCHOR" name="AcknowledgementsTOC">Acknowledgements</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#BibliographyANCHOR" name="BibliographyTOC">Bibliography</a></div>
         </div>
      </div>
   </div>
</div>
<div id="mainContainerTERMS">
   <div id="mainContainerTitleTERMS" onclick="$('#mainContainerEntriesTERMS').toggle('1000')">Index of Terms</div>
   <div id="mainContainerEntriesTERMS" style="display:none;">
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">a</div>
         <div class="singletermTERMS">August 3 - 6, 2010</div>
         <div class="singletermTERMS">Abraham</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">b</div>
         <div class="singletermTERMS">Balisage: The Markup Conference 2010</div>
         <div class="singletermTERMS">beckera@ncbi.nlm.nih.gov</div>
         <div class="singletermTERMS">Becker</div>
         <div class="singletermTERMS">Beck</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">c</div>
         <div class="singletermTERMS">Content Related</div>
         <div class="singletermTERMS">Computer Science</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">d</div>
         <div class="singletermTERMS">Document Management</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">e</div>
         <div class="singletermTERMS">Essence</div>
         <div class="singletermTERMS">Example</div>
         <div class="singletermTERMS">Essence Test</div>
         <div class="singletermTERMS">Essence XML Extractor Style Sheet</div>
         <div class="singletermTERMS">Essence XML Extractor XSLT</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">f</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">g</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">h</div>
         <div class="singletermTERMS">How did we do at meeting the objectives?</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">i</div>
         <div class="singletermTERMS">Information Storage and Retrieval</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">j</div>
         <div class="singletermTERMS">Jeff</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">k</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">l</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">m</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">n</div>
         <div class="singletermTERMS">NLM Archiving and Interchange DTD</div>
         <div class="singletermTERMS">National Center for Biotechnology Information</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">o</div>
         <div class="singletermTERMS">OBJECTIVE:</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">p</div>
         <div class="singletermTERMS">PubMed Central (PMC)</div>
         <div class="singletermTERMS">PMC Open Access Subset</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">q</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">r</div>
         <div class="singletermTERMS">RESULTS:</div>
         <div class="singletermTERMS">Regression</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">s</div>
         <div class="singletermTERMS">SYNOPSIS:</div>
         <div class="singletermTERMS">SIGNIFICANCE:</div>
         <div class="singletermTERMS">System Critical</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">t</div>
         <div class="singletermTERMS">Technical Information Specialist</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">u</div>
         <div class="singletermTERMS">U.S. National Institutes of Health</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">v</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">x</div>
         <div class="singletermTERMS">XML Translation Specialist</div>
         <div class="singletermTERMS">XML Essence Testing</div>
         <div class="singletermTERMS">XML Conformance Testing</div>
         <div class="singletermTERMS">XML Quality Control</div>
         <div class="singletermTERMS">XML Testing</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">y</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">z</div>
      </div>
   </div>
</div>
<div id="mainContainerIML"><a name="XMLEssenceTestingANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="article e0" version="5.0-subset Balisage-1.2" xml:id="HR-23632987-8973">
      <div class="title e1">XML Essence Testing</div>
      <div class="info e2">
         <div class="confgroup e3">
            <div class="conftitle e4">Balisage: The Markup Conference 2010</div>
            <div class="confdates e5">August 3 - 6, 2010</div>
         </div>
         <div class="abstract e6">
            <div class="para e7">
               <div class="emphasis e8" role="bold">SYNOPSIS:</div>
               <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e9" xlink:actuate="onRequest" xlink:href="http://www.ncbi.nlm.nih.gov/pmc/" xlink:show="new" xlink:type="simple">PubMed Central (PMC)</div> is the
               
               <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e10" xlink:actuate="onRequest" xlink:href="http://www.nih.gov/" xlink:show="new" xlink:type="simple">U.S. National Institutes
                  of Health
               </div> free digital archive, gathering together biomedical and life
               sciences journal literature from diverse sources. When an article arrives at PMC,
               it
               conforms to one of over 40 evolving DTDs. An ingestion process applies appropriate
               "Modified Local" and "Production" XSLT style sheets to produce two instances of the
               common 
               <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e11" xlink:actuate="onRequest" xlink:href="http://dtd.nlm.nih.gov/archiving/" xlink:show="new" xlink:type="simple">NLM
                  Archiving and Interchange DTD
               </div>. In the "Essence Testing" phase, the essential
               nodes of these XML instances, as specified by some 60 XPath expressions, are compared.
               This method allows the reliable detection of unintentional changes to an XSLT style
               sheet that can have negative impacts on product quality.
            </div>
            <div class="para e12">
               <div class="emphasis e13" role="bold">OBJECTIVE:</div> Create an easy-to-use tool that allows
               tracking, reporting, and qualitative analysis to monitor the effects of changes to
               existing XSLT style sheets on the content of XML articles. The tool should have the
               ability to look beyond differences in the XML structures of those articles, focusing
               on
               essential data and its semantics (the document’s 
               <div class="emphasis e14" role="ital">Essence</div>).
            </div>
            <div class="para e15">
               <div class="emphasis e16" role="bold">RESULTS:</div> A Guided User Interface was created using
               CGI, which invokes 2 PERL scripts (sampler [SQL, UNIX], and converter [Saxon 9.1.0.5J]).
               A test and a control NXML document are created. The 
               <div class="emphasis e17" role="ital">Essence</div> is extracted from those documents using XPath expressions, and a
               JAVA program compares and formulates a report of the differences in the 
               <div class="emphasis e18" role="ital">Essence</div> documents.
            </div>
            <div class="para e19">
               <div class="emphasis e20" role="bold">SIGNIFICANCE:</div> Quality control reports on XSLT style
               sheets are now run on a weekly basis, or any time significant changes are made to
               the
               XSLT style sheets. The level of control and the granularity of tracking has increased,
               and has had a very positive effect on quality of the XML output.
            </div>
         </div>
         <div class="author e21">
            <div class="personname e22">
               <div class="firstname e23">Abraham</div>
               <div class="surname e24">Becker</div>
            </div>
            <div class="personblurb e25">
               <div class="para e26">Abraham is currently working as a Contractor with the 
                  <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e27" xlink:actuate="onRequest" xlink:href="http://www.ncbi.nlm.nih.gov/" xlink:show="new" xlink:type="simple">National Center for Biotechnology
                     Information
                  </div>. He started in print production, document management, and has
                  been working with XML based technologies for the past seven years.
               </div>
            </div>
            <div class="affiliation e28">
               <div class="jobtitle e29">XML Translation Specialist</div>
               <div class="orgname e30">National Center for Biotechnology Information (NCBI), National Library of
                  Medicine (NLM), National Institutes of Heath (NIH)
               </div>
            </div>
            <div class="email e31">beckera@ncbi.nlm.nih.gov</div>
         </div>
         <div class="author e32">
            <div class="personname e33">
               <div class="firstname e34">Jeff</div>
               <div class="surname e35">Beck</div>
            </div>
            <div class="personblurb e36">
               <div class="para e37">Jeff Beck has been involved in the PubMed Central project at NLM since 2000. He
                  has been working in journal publishing since the early 1990s.
               </div>
            </div>
            <div class="affiliation e38">
               <div class="jobtitle e39">Technical Information Specialist</div>
               <div class="orgname e40">National Center for Biotechnology Information (NCBI), National Library of
                  Medicine (NLM), National Institutes of Heath (NIH)
               </div>
            </div>
         </div>
         <div class="legalnotice e41">
            <div class="para e42">Authors' contribution to the Work was done as part of the Authors' official duties
               as NIH employees and is a Work of the United States Government.  Therefore, copyright
               may not be established in the United States. 17 U.S.C. § 105.  If Publisher intends
               to disseminate the Work outside the U.S., Publisher may secure copyright to the extent
               authorized under the domestic laws of the relevant country, subject to a paid-up,
               nonexclusive, irrevocable worldwide license to the United States in such copyrighted
               work to reproduce, prepare derivative works, distribute copies to the public and perform
               publicly and display publicly the work, and to permit others to do so.
            </div>
         </div>
         <div class="keywordset e43" role="author">
            <div class="keyword e44">XML Essence Testing</div>
            <div class="keyword e45">Regression</div>
            <div class="keyword e46">XML Conformance Testing</div>
            <div class="keyword e47">XML Quality Control</div>
            <div class="keyword e48">Computer Science</div>
            <div class="keyword e49">Information Storage and Retrieval</div>
            <div class="keyword e50">Document Management</div>
            <div class="keyword e51">XML Testing</div>
         </div>
      </div><a name="IntroductionANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e52">
         <div class="title e53">Introduction</div>
         <div class="para e54">
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e55" xlink:actuate="onRequest" xlink:href="http://www.ncbi.nlm.nih.gov/pmc/" xlink:show="new" xlink:type="simple">PubMed Central
               (PMC)
            </div> is the 
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e56" xlink:actuate="onRequest" xlink:href="http://www.nih.gov/" xlink:show="new" xlink:type="simple">U.S.
               National Institutes of Health
            </div> (NIH) free digital archive of biomedical and life
            sciences journal literature. 
         </div>
         <div class="para e57">PMC processes approximately 500 full-text XML articles per day, and 16,000 full-text
            articles per month, in over 40 evolving DTDs. The frequency of updates to the DTDs,
            and new
            versions of the 
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e58" xlink:actuate="onRequest" xlink:href="http://dtd.nlm.nih.gov/" xlink:show="new" xlink:type="simple">NLM
               Archiving and Interchange DTD
            </div> itself, force the XSLT style sheets that process
            those documents to also evolve rapidly. This continuous metamorphosis brought about
            a need
            to track the way changes to production XSLT style sheets affect XML result documents.
            A
            regression system was originally put into place which utilized the UNIX diff function.
            Its
            method was to check for textual differences between sample articles converted with
            "Production" XSLT style sheets, and those same sample articles converted with "Modified
            Local" XSLT style sheets (a basic regression test).
         </div>
         <div class="para e59">PMC must maintain content in different versions of the 
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e60" xlink:actuate="onRequest" xlink:href="http://dtd.nlm.nih.gov/" xlink:show="new" xlink:type="simple">NLM Archiving and Interchange DTD</div>. Since the
            release of version 3.0 in the fall of 2008, the PMC Conversion Group has been methodically
            upgrading our XSLT style sheets to XSLT2. This upgrade adds a level of confusion to
            our
            existing regression testing, since some of the changes from version 2.3 to version
            3.0 are
            backwards incompatible, and some of the XML nesting structures have changed.
         </div>
         <div class="para e61">How can we verify that an article originally created in DTD version 2.3, is now
            correctly represented by the new DTD version 3.0 coding?
         </div>
         <div class="para e62">Upgrading or migrating the sample set to DTD 3.0 is an obvious answer, but in order
            to
            migrate the data, we need an XSLT conversion. It is the very XSLT style sheet that
            would
            perform this conversion which we aim to check. We needed a way to verify that the
            article
            written in DTD 3.0 is semantically the same as the 2.3 version. We needed to check
            that the
            test XML instance has the same content, even if the content is nested in a different
            structure, or captured using new named elements. We need to check the article's 
            <div class="emphasis e63" role="ital">Essence</div>.
         </div>
         <div class="para e64">Our solution was to define a set of XPaths that would extract essential nodes in the
            document, allowing us to compare a small subset of the most important nodes between
            a test
            and a control XML instance. The goal was to go beyond simple text comparison, to managing
            consistency of XML documents’ data and semantics across updates to the XSLT
            Converters.
         </div>
      </div><a name="OverviewofthePMCXMLProcessingModelANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e65">
         <div class="title e66">Overview of the PMC XML Processing Model</div>
         <div class="para e67">Some background information is necessary for a good understanding of how the Essence
            Testing system works. As stated earlier, PubMed Central accepts XML in just over 40
            different DTDs. Articles from each DTD are processed as follows: 
            <div class="orderedlist e68">
               <div class="listitem e69">
                  <div class="para e70">XML is submitted to the PMC FTP site, and ingested into the file system.</div>
               </div>
               <div class="listitem e71">
                  <div class="para e72">OASIS XML Catalogs resolve source XML PUBLIC and SYSTEM identifiers, which map
                     validation to the appropriate DTD.
                  </div>
               </div>
               <div class="listitem e73">
                  <div class="para e74">A configuration file determines which production XSLT style sheet to apply,
                     based on the source XML DTD name and version.
                  </div>
               </div>
               <div class="listitem e75">
                  <div class="para e76">The production XSLT is used to convert the source XML to a common 
                     <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e77" xlink:actuate="onRequest" xlink:href="http://dtd.nlm.nih.gov/" xlink:show="new" xlink:type="simple">NLM Archiving and
                        Interchange DTD
                     </div> 3.0 XML (NXML) format.
                  </div>
               </div>
               <div class="listitem e78">
                  <div class="para e79">The newly created NXML and its associated files (Images, PDFs, Supplementary
                     files) are loaded to a common database for rendering and indexing.
                  </div>
               </div>
            </div>Changes to the XSLT style sheets have an impact not only on the normalized
            NXML, but also on the HTML rendering. It is therefore important to ensure that changes
            to
            the XSLT style sheets do not negatively affect those downstream data products.
            <div class="figure e80" xml:id="regr-pmc-proc" xreflabel="regr-pmc-proc">
               <div class="mediaobject e81">
                  <div class="imageobject e82">
                     <div class="metaBox e83"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e155').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e155" class="metaSource" style="display:none;">                
                           &lt;imagedata<span class="metaAttribute">class='e83'
                              </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-001.jpg'
                              </span><span class="metaAttribute">format='jpg'
                              </span>
                           &gt;
                           
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div><a name="MethodsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e84">
         <div class="title e85">Methods</div><a name="TheEssenceTestingProcessANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e86">
            <div class="title e87">The Essence Testing Process</div>
            <div class="para e88">The 
               <div class="emphasis e89" role="ital">Essence</div> Testing Software uses a single XML
               source instance (submitted by the external data provider), the user's "Modified local"
               copy of the appropriate XSLT style sheet, and the quality assured production NXML
               to
               test if the changes in the user's "Modified local" XSLT style sheet produce adverse
               effects in the test NXML output, when compared to the quality assured NXML.
            </div><a name="TrackingANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e90">
               <div class="title e91">Tracking</div>
               <div class="para e92">Tracking the configuration used to convert each XML instance gives us the freedom
                  to take completely random sample sets based on a given set of parameters. XML
                  processing instructions are added to the NXML instances to facilitate tracking of
                  the
                  processing model applied. In the PMC system, the following information is written
                  to PIs:
                  <div class="orderedlist e93">
                     <div class="listitem e94">
                        <div class="para e95">DTD Identifier Value (DOCTYPE string used to resolve DTD)</div>
                     </div>
                     <div class="listitem e96">
                        <div class="para e97">DTD Identifier Type (PUBLIC or SYSTEM)</div>
                     </div>
                     <div class="listitem e98">
                        <div class="para e99">DTD Name</div>
                     </div>
                     <div class="listitem e100">
                        <div class="para e101">DTD Version</div>
                     </div>
                     <div class="listitem e102">
                        <div class="para e103">XSLT Name</div>
                     </div>
                     <div class="listitem e104">
                        <div class="para e105">XSLT Version</div>
                     </div>
                     <div class="listitem e106">
                        <div class="para e107">XSLT Effective Date</div>
                     </div>
                     <div class="listitem e108">
                        <div class="para e109">If XSLT is Currently in production</div>
                     </div>
                  </div>
               </div>
               <div class="para e110">These PIs are used to populate a tracking database in which each article's
                  processing model is stored. Aside from generating sample sets, we have the added
                  benefit of targeted reconversion when bugs are found. Each article instance is
                  assigned to a specific processing configuration, and all articles processed with a
                  given configuration can be queried for reconversion.
                  <div class="figure e111" xml:id="regr-database-model" xreflabel="regr-database-model">
                     <div class="mediaobject e112">
                        <div class="imageobject e113">
                           <div class="metaBox e114"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e202').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e202" class="metaSource" style="display:none;">                
                                 &lt;imagedata<span class="metaAttribute">class='e114'
                                    </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-002.jpg'
                                    </span><span class="metaAttribute">format='jpg'
                                    </span>
                                 &gt;
                                 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a name="DefiningtheDocument'sEssenceANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e115">
               <div class="title e116">Defining the Document's Essence</div>
               <div class="para e117">Familiarity with the XML model should guide which nodes in the XML test instances
                  are the most important to monitor. The PMC Conversion Group created tests that fall
                  into one of two categories: system critical or content related. System critical
                  issues are those that directly impact the way an article is processed. For example,
                  the Open Access Status registers inclusion in the 
                  <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e118" xlink:actuate="onRequest" xlink:href="http://www.ncbi.nlm.nih.gov/pmc/about/openftlist.html" xlink:show="new" xlink:type="simple">PMC Open Access
                     Subset
                  </div>. These articles are generally made available immediately to the
                  public under a creative commons license. It is critical that this property is set
                  correctly, because many non-Open Access articles are contractually bound to be hidden
                  until an embargo period expires. Content related issues are those that pertain to
                  the
                  quality of the data, such as the count of paragraphs, sections, references, and figures.
                  <div class="itemizedlist e119">
                     <div class="listitem e120">
                        <div class="para e121">
                           <div class="emphasis e122" role="bold">System Critical</div>: Open Access Status,
                           Release Delays, Publication Dates, Journal Meta data, Article Meta
                           data
                        </div>
                     </div>
                     <div class="listitem e123">
                        <div class="para e124">
                           <div class="emphasis e125" role="bold">Content Related</div>: Presence of Abstract,
                           Body, Paragraph Element counts, Back Matter, Article Type, Author counts,
                           Language(s), Figure Table and Math counts, Bibliographic References,
                           Citation counts
                        </div>
                     </div>
                  </div>
                  <div class="emphasis e126" role="bold">Example</div>: Research articles are always
                  associated with a journal in the PMC context, so this test is system critical. The
                  element &lt;journal-title&gt; is a child of &lt;journal-meta&gt; in NLM DTD version
                  2.3. With the release of NLM DTD 3.0, the &lt;journal-title-group&gt; wrapper was
                  added to group the optional elements &lt;trans-title-group&gt;,
                  &lt;abbrev-journal-title&gt;, and &lt;journal-subtitle&gt;. A simple text comparison of
                  these two structures would yield a mismatch. By using XPath, we facilitate comparison
                  of the content from two separate DTD models, overlooking the differences in
                  structure, focusing on consistency and meaning of the data.
                  <div class="figure e127" xml:id="regr-2.3-3.0" xreflabel="regr-2.3-3.0">
                     <div class="mediaobject e128">
                        <div class="imageobject e129">
                           <div class="metaBox e130"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e228').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e228" class="metaSource" style="display:none;">                
                                 &lt;imagedata<span class="metaAttribute">class='e130'
                                    </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-003.jpg'
                                    </span><span class="metaAttribute">format='jpg'
                                    </span>
                                 &gt;
                                 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div><a name="EssenceXMLExtractorStyleSheetANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e131">
                  <div class="title e132">Essence XML Extractor Style Sheet</div>
                  <div class="para e133">Each 
                     <div class="emphasis e134" role="ital">Essence Test</div> is placed inside a literal
                     result element in the 
                     <div class="emphasis e135" role="ital">Essence XML Extractor Style
                        Sheet
                     </div>. This method of identifying the essential nodes via XPath can
                     be applied to XML documents in two analogous, or two completely different DTDs. By
                     creating a list of XPaths that point to the essential nodes in the result
                     documents, we can extract the 
                     <div class="emphasis e136" role="ital">Essence</div> from both
                     the (test) NXML and from the quality assured production (control) NXML, using
                     these extracted documents as a basis for comparison.
                     <div class="figure e137" xml:id="regr-ess-extractor" xreflabel="regr-ess-extractor">
                        <div class="mediaobject e138">
                           <div class="imageobject e139">
                              <div class="metaBox e140"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e246').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e246" class="metaSource" style="display:none;">                
                                    &lt;imagedata<span class="metaAttribute">class='e140'
                                       </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-004.jpg'
                                       </span><span class="metaAttribute">format='jpg'
                                       </span>
                                    &gt;
                                    
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a name="EssenceTestingWorkflowANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e141">
               <div class="title e142">Essence Testing Work flow</div>
               <div class="para e143">The Essence testing process is aimed at creating two Essence XML documents that
                  can be compared to expose anomalies resulting from changes to the "Modified Local"
                  XSLT. We start with the publisher XML file (source). Using the production XSLT(shown
                  in green), a production NXML (gray) is converted, to be used as the control instance.
                  Quality assurance on these documents is handled by the PMC data group. They report
                  variations in rendering and processing, and verify that content is acceptable based
                  on a set of approximately 90 quality checks. A test NXML instance is also created
                  by
                  applying the user's "Modified Local" XSLT style sheet (shown in purple) to the
                  original source XML.
                  <div class="figure e144" xml:id="regr-ess-wkflw" xreflabel="regr-ess-wkflw">
                     <div class="mediaobject e145">
                        <div class="imageobject e146">
                           <div class="metaBox e147"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e255').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e255" class="metaSource" style="display:none;">                
                                 &lt;imagedata<span class="metaAttribute">class='e147'
                                    </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-005.jpg'
                                    </span><span class="metaAttribute">format='jpg'
                                    </span>
                                 &gt;
                                 
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a name="ComparingEssenceXMLDocumentsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e148">
               <div class="title e149">Comparing Essence XML Documents</div>
               <div class="para e150">As mentioned earlier, the 
                  <div class="emphasis e151" role="ital">Essence XML Extractor
                     XSLT
                  </div> is used to extract the 
                  <div class="emphasis e152" role="ital">Essence</div> of
                  both the test and control instances, creating a Test Essence XML and a Control
                  Essence XML. These two documents are compared element-by-element, and any differences
                  in structure or content are aggregated into a report.
               </div>
               <div class="para e153">
                  <div class="emphasis e154" role="bold">Example</div>: Below is an example of Essence XML
                  documents from an article of the journal BMC Microbiology. Note that some of the
                  tests are counts, and some are string comparisons. In this particular case, while
                  running a weekly regression test, I noticed that the report showed a MathML formula
                  was present in the test Essence XML, but not in the control Essence XML. After some
                  investigation, I found that a bug was fixed in the XSLT converter a few weeks
                  previous to this Essence Test, but there were still some lingering articles that
                  needed to be reconverted. Because the processing configuration was stored in our
                  tracking database, I was able to easily locate and reprocess all articles affected
                  by
                  the bug, without reprocessing the entire journal data set.
               </div>
               <div class="figure e155" xml:id="regr-ess-xml1" xreflabel="regr-ess-xml1">
                  <div class="mediaobject e156">
                     <div class="imageobject e157">
                        <div class="metaBox e158"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e274').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e274" class="metaSource" style="display:none;">                
                              &lt;imagedata<span class="metaAttribute">class='e158'
                                 </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-006.jpg'
                                 </span><span class="metaAttribute">format='jpg'
                                 </span>
                              &gt;
                              
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="figure e159" xml:id="regr-ess-xml2" xreflabel="regr-ess-xml2">
                  <div class="mediaobject e160">
                     <div class="imageobject e161">
                        <div class="metaBox e162"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e278').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e278" class="metaSource" style="display:none;">                
                              &lt;imagedata<span class="metaAttribute">class='e162'
                                 </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-007.jpg'
                                 </span><span class="metaAttribute">format='jpg'
                                 </span>
                              &gt;
                              
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a name="EssenceReportANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e163">
               <div class="title e164">Essence Report</div>
               <div class="para e165">The Essence report summary lists the number of differences by test category in the
                  red box, showing a macro view of how the changes to the "Modified Local" XSLT are
                  adding up in a more general sense. For each difference detected between the test and
                  the control instances, a failure is reported below, aggregated by XML instance.
                  "[added (test)]" means the test case has additional information when compared to the
                  Control Essence XML. "[replaced (accepted)]" followed by "[with (test)]" means that
                  the test case does not match the Control Essence XML, and the test instance contains
                  something additional to what was found in the test instance.
               </div>
               <div class="figure e166" xml:id="regr-ess-report" xreflabel="regr-ess-report">
                  <div class="mediaobject e167">
                     <div class="imageobject e168">
                        <div class="metaBox e169"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e287').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e287" class="metaSource" style="display:none;">                
                              &lt;imagedata<span class="metaAttribute">class='e169'
                                 </span><span class="metaAttribute">fileref='../../../vol5/graphics/Becker01/Becker01-008.jpg'
                                 </span><span class="metaAttribute">format='jpg'
                                 </span>
                              &gt;
                              
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div><a name="ResultsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e170">
         <div class="title e171">Results</div>
         <div class="para e172">Using the 
            <div class="emphasis e173" role="ital">Essence</div> of an XML document as a basis for
            quality control is a viable solution for verifying that documents tagged in different
            versions of a schema or DTD represent the same semantic. Large data sets are time
            consuming
            to process, but random sampling maximizes the effects of testing, while limiting the
            time
            to run a given test. Controlling XSLT regression over large XML data sets is not trivial,
            and this system allows an acceptable means of monitoring the effects of those modifications
            over time.
         </div>
      </div><a name="DiscussionANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e174">
         <div class="title e175">Discussion</div>
         <div class="para e176">
            <div class="emphasis e177" role="bold">How did we do at meeting the objectives?</div>
         </div>
         <div class="para e178">The Essence Testing GUI has proven to be an effective and useful tool after several
            months in production. It ensures changes to XSLT style sheets do not have adverse
            effects
            on the quality of XML output. Using XPath to test the 
            <div class="emphasis e179" role="ital">Essence</div> of XML output allows comparisons between different DTD versions of
            the same article in an organized and reliable way.
         </div>
         <div class="para e180">
            <div class="emphasis e181" role="bold">Were there implementation problems?</div>
         </div>
         <div class="para e182">Processing large data sets, especially those over 100 full-text articles, takes longer
            than what we would ideally want. Converting full-text XML articles, applying the 
            <div class="emphasis e183" role="ital">Essence</div> transformation, then comparing the output of those
            processes could be handled more efficiently with a modular, object oriented approach,
            involving several parallel processes converting XML simultaneously.
         </div>
         <div class="para e184">
            <div class="emphasis e185" role="bold">What future directions might the project take?</div>
         </div>
         <div class="para e186">The configuration of this tool is specific to PubMed Central's data directory structures
            and database models. Modularizing the code for a more generic software API could be
            a
            direction for future improvement.
         </div>
         <div class="para e187">
            <div class="emphasis e188" role="bold">What are the greatest benefits of this system?</div>
         </div>
         <div class="para e189">When an XSLT bug was found in the past, large portions of the entire XML data set
            would
            have been reconverted to fix it. Tracking the processing model information for each
            XML
            article instance significantly reduces the reprocessing overhead associated with such
            bugs,
            and allows more specificity when identifying affected articles. Negative impacts on
            NXML
            output due to changes in the XSLT style sheets have been significantly reduced. Automatic
            weekly regression tests continually reinforce the quality and integrity of the data
            stored
            in our system.
         </div>
      </div><a name="AcknowledgementsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e190">
         <div class="title e191">Acknowledgements</div>
         <div class="para e192">Jeff Beck, Sergey Krasnov, Vladimir Sarkisov, Andrei Kolotev, Anh Nguyen, and Laura
            Kelly provided a great deal of guidance in the design of this project. Their input,
            as
            always, has proven to be wise, insightful, and is very much appreciated. The comparison
            and
            reporting segment of the system was written by Jane Rall and Byungsoo Kim. This research
            was supported by the Intramural Research Program of the NIH, National Library of
            Medicine.
         </div>
      </div><a name="BibliographyANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="bibliography e193">
         <div class="title e194">Bibliography</div>
         <div class="bibliomixed e195" xml:id="bio1" xreflabel="Beaulieu2005">Beaulieu, Alan, Learning SQL. Sebastopol,
            California: O'Reilly Media, Inc.; 2005
         </div>
         <div class="bibliomixed e196" xml:id="bio5" xreflabel="Guelich2000">Guelich, Scott; Gundacaram, Shishir;
            Birznieks, Gunther CGI Programming with Perl, Second Edition. Sebastopol, California:
            O'Reilly &amp; Associates, Inc.; 2000
         </div>
         <div class="bibliomixed e197" xml:id="bio2" xreflabel="Kay2008">Kay, Michael XSLT 2.0 and XPath 2.0
            Programmer's Reference, 4th Edition. Indianapolis, Indiana: Wiley Publishing, Inc.;
            2008
         </div>
         <div class="bibliomixed e198" xml:id="bio6" xreflabel="Meltzer2001">Meltzer, Kevin; Michalski Writing CGI
            applications with Perl. Upper Saddle River, New Jersey: Pearson Education;
            2001
         </div>
         <div class="bibliomixed e199" xml:id="bio4" xreflabel="Robbins2005">Robbins, Arnold; Beebe, Nelson H.F. Classic
            Shell Scripting. Sebastopol, California: O'Reilly Media, Inc.; 2005
         </div>
         <div class="bibliomixed e200" xml:id="bio3" xreflabel="Wall2000">Wall, Larry; Christiansen, Tom; Orwant, Jon
            Programming Perl, Third Edition. Sebastopol, California: O'Reilly &amp; Associates,
            Inc.; 2000
         </div>
      </div>
   </div>
</div>