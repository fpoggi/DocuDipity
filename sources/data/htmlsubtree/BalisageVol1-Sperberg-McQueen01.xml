<div id="mainContainerTOC">
   <div id="mainContainerTitleTOC" onclick="$('#mainContainerEntriesTOC').toggle('1000');">Table of Content</div>
   <div id="mainContainerEntriesTOC" style="display:none;">
      <div class="headedContainerTOC">
         <div class="headedContainerTitleTOC"><a href="#MarkupDiscontinuedANCHOR" name="MarkupDiscontinuedTOC">Markup Discontinued</a></div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#TheproblemofdiscontinuityANCHOR" name="TheproblemofdiscontinuityTOC">The problem of discontinuity</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#TexMecsnotationANCHOR" name="TexMecsnotationTOC">TexMecs notation</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#GoddagstructuresANCHOR" name="GoddagstructuresTOC">Goddag structures</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#ContainmentanddominanceANCHOR" name="ContainmentanddominanceTOC">Containment and dominance</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#Rabbit/duckgrammarsANCHOR" name="Rabbit/duckgrammarsTOC">Rabbit/duck grammars</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#RelationtootherproposalsANCHOR" name="RelationtootherproposalsTOC">Relation to other proposals</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#ConclusionANCHOR" name="ConclusionTOC">Conclusion</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#ReferencesANCHOR" name="ReferencesTOC">References</a></div>
         </div>
      </div>
   </div>
</div>
<div id="mainContainerTERMS">
   <div id="mainContainerTitleTERMS" onclick="$('#mainContainerEntriesTERMS').toggle('1000')">Index of Terms</div>
   <div id="mainContainerEntriesTERMS" style="display:none;">
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">a</div>
         <div class="singletermTERMS">and what is the use of a book,</div>
         <div class="singletermTERMS">Alice was beginning ... of a book</div>
         <div class="singletermTERMS">and what ...</div>
         <div class="singletermTERMS">Alice in Wonderland</div>
         <div class="singletermTERMS">August 12 - 15, 2008</div>
         <div class="singletermTERMS">Associate Professor (f√∏rsteamanuensis)</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">b</div>
         <div class="singletermTERMS">book</div>
         <div class="singletermTERMS">Balisage: The Markup Conference 2008</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">c</div>
         <div class="singletermTERMS">Colorful XML: One hierarchy isn't enough</div>
         <div class="singletermTERMS">Containment and dominance in Goddag structures</div>
         <div class="singletermTERMS">Creole: Validating Overlapping Markup</div>
         <div class="singletermTERMS">containment</div>
         <div class="singletermTERMS">closing</div>
         <div class="singletermTERMS">cannot</div>
         <div class="singletermTERMS">C. M.</div>
         <div class="singletermTERMS">Claus</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">d</div>
         <div class="singletermTERMS">dominance</div>
         <div class="singletermTERMS">DDEP-PODDP 2000</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">e</div>
         <div class="singletermTERMS">end-</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">f</div>
         <div class="singletermTERMS">final</div>
         <div class="singletermTERMS">first-class</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">g</div>
         <div class="singletermTERMS">Guidelines</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">h</div>
         <div class="singletermTERMS">Huitfeldt</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">i</div>
         <div class="singletermTERMS">IDREF</div>
         <div class="singletermTERMS">initial</div>
         <div class="singletermTERMS">in.quot</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">j</div>
         <div class="singletermTERMS">jump tags</div>
         <div class="singletermTERMS">join</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">k</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">l</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">m</div>
         <div class="singletermTERMS">medial</div>
         <div class="singletermTERMS">Markup overlap: A review and a horse.</div>
         <div class="singletermTERMS">Making CONCUR work.</div>
         <div class="singletermTERMS">Member of the technical staff</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">n</div>
         <div class="singletermTERMS">next</div>
         <div class="singletermTERMS">not</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">o</div>
         <div class="singletermTERMS">one</div>
         <div class="singletermTERMS">opening</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">p</div>
         <div class="singletermTERMS">part="I"</div>
         <div class="singletermTERMS">part="M"</div>
         <div class="singletermTERMS">part="F"</div>
         <div class="singletermTERMS">PCDATA</div>
         <div class="singletermTERMS">paragraph</div>
         <div class="singletermTERMS">part</div>
         <div class="singletermTERMS">prev</div>
         <div class="singletermTERMS">Proceedings of Extreme Markup Languages 2005</div>
         <div class="singletermTERMS">Proceedings of Extreme Markup Languages 2004</div>
         <div class="singletermTERMS">Proceedings of Extreme Markup Languages 2006</div>
         <div class="singletermTERMS">Processing text-technological resources</div>
         <div class="singletermTERMS">Proceedings of XTech 2007</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">q</div>
         <div class="singletermTERMS">quotation</div>
         <div class="singletermTERMS">q1</div>
         <div class="singletermTERMS">q2</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">r</div>
         <div class="singletermTERMS">resume-</div>
         <div class="singletermTERMS">R1</div>
         <div class="singletermTERMS">R2</div>
         <div class="singletermTERMS">R3</div>
         <div class="singletermTERMS">R4</div>
         <div class="singletermTERMS">R5</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">s</div>
         <div class="singletermTERMS">suspend-</div>
         <div class="singletermTERMS">start</div>
         <div class="singletermTERMS">Sperberg-McQueen</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">t</div>
         <div class="singletermTERMS">thought Alice</div>
         <div class="singletermTERMS">TEI HORSEing around.</div>
         <div class="singletermTERMS">Towards validation of concurrent markup.</div>
         <div class="singletermTERMS">thought</div>
         <div class="singletermTERMS">text</div>
         <div class="singletermTERMS">TexMECS tester</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">u</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">v</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">x</div>
         <div class="singletermTERMS">XQuery 1.0 and XPath 2.0 Full-Text 1.0</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">y</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">z</div>
      </div>
   </div>
</div>
<div id="mainContainerIML"><a name="MarkupDiscontinuedANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="article e0" version="5.0-subset Balisage-1.2">
      <div class="title e1">Markup Discontinued</div>
      <div class="subtitle e2">Discontinuity in TexMecs, Goddag structures, and rabbit/duck grammars</div>
      <div class="info e3">
         <div class="confgroup e4">
            <div class="conftitle e5">Balisage: The Markup Conference 2008</div>
            <div class="confdates e6">August 12 - 15, 2008</div>
         </div>
         <div class="abstract e7">
            <div class="para e8">That the textual phenomena of interest for markup are not always
               hierarchically arranged is well known and widely discussed.  Less
               frequently discussed is the fact that they are also not always
               contiguous, so that the units of our analysis cannot always correspond
               to single elements in the document. Various notations for
               discontinuous elements exist,
               but the mapping from those notations to data structures has not been
               well analysed or understood.  And as far as we know, there are
               no standard mechanisms for validating discontinuous elements.
               We propose a data structure (a modification of the Goddag structure) to better
               handle discontinuous elements:  we relax the rule that every
               pair of elements where one contains the other be related by
               a path of parent/child links.  Parent/child links are then not an
               automatic result of containment.  We conclude with a brief
               sketch of the issues involved in extending current validation
               mechanisms to handle discontinuity.
               
            </div>
         </div>
         <div class="author e9">
            <div class="personname e10">
               <div class="firstname e11">C. M.</div>
               <div class="surname e12">Sperberg-McQueen</div>
            </div>
            <div class="personblurb e13">
               <div class="para e14">C. M. Sperberg-McQueen is a member of the technical staff of the World
                  Wide Web Consortium.  He has served as co-editor of the XML 1.0
                  specification, the Guidelines of the Text Encoding Initiative, and the
                  XML Schema Definition Language (XSDL) 1.1 specification.  He holds a
                  doctorate in comparative literature.
                  
               </div>
            </div>
            <div class="affiliation e15">
               <div class="jobtitle e16">Member of the technical staff</div>
               <div class="orgname e17">World Wide Web Consoritum / MIT</div>
            </div>
         </div>
         <div class="author e18">
            <div class="personname e19">
               <div class="firstname e20">Claus</div>
               <div class="surname e21">Huitfeldt</div>
            </div>
            <div class="personblurb e22">
               <div class="para e23">Mag.art. Claus Huitfeldt (born 1957) is Associate Professor (f√∏rsteamanuensis) at
                  the Department of Philosophy of the University  of Bergen since 1994.
                  
               </div>
               <div class="para e24">
                  He was founding Director (1990-2000) of the Wittgenstein Archives at the University
                  of Bergen, for which he developed the text encoding system MECS as well as the editorial
                  methods for the publication of 
                  <div class="emphasis e25">Wittgenstein's Nachlass ‚Äî The Bergen Electronic Edition</div>
                  (Oxford University Press, 2000).
               </div>
               <div class="para e26">
                  He was Research Director (2000-2002) of Aksis (Section for Culture, Language and Information
                  Technology at the Bergen University Research Foundation). In 2003 he returned to his
                  position at the Department of Philosophy, where he teaches modern philosophy and philosophy
                  of language, and also gives frequent courses in text technology at the The Department
                  of Humanistic Informatics.
                  
               </div>
               <div class="para e27">
                  He was active in the Text Encoding Initiative (TEI) since 1991, and was centrally
                  involved in the foundation of the TEI Consortium in 2001. The consortium now counts
                  more than 90 member institutions.
                  
               </div>
               <div class="para e28">
                  Huitfeldt's research interests are within philosophy of language, philosophy of technology,
                  text theory, editorial philology and markup theory. He is currently leader of the
                  project Markup Languages for Complex Documents (MLCD).
               </div>
            </div>
            <div class="affiliation e29">
               <div class="jobtitle e30">Associate Professor (f√∏rsteamanuensis)</div>
               <div class="orgname e31">Department of Philophy, University of Bergen</div>
            </div>
         </div>
         <div class="legalnotice e32">
            <div class="para e33">Copyright ¬© 2008 by the authors.  Used with
               permission.
            </div>
         </div>
      </div>
      <div class="para e34">This paper describes work in progress on the problem of
         discontinuous structures undertaken in the context of the
         project Markup Languages for Complex Documents (MLCD) at the
         University of Bergen.
         The first section describes the problem in
         simple terms.  Subsequent sections describe the problem as it relates
         to other work of the MLCD project:
         the TexMecs notation for marked up documents in serial form, to the
         Goddag data structure, and to validation with rabbit/duck grammars.
      </div>
      <div class="para e35">We consider the problem of discontinuity in the light of a recent
         proposal to treat 
         <div class="emphasis e36">containment</div> and 
         <div class="emphasis e37">dominance</div>
         as distinct relations. We suggest that this proposal allows a solution
         (or dissolution) of the problem, at least for Goddag structures.  In
         the context of validation, a number of problems remain for future
         work.
      </div><a name="TheproblemofdiscontinuityANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e38" xml:id="intro">
         <div class="title e39">The problem of discontinuity</div>
         <div class="para e40">Consider the following familiar passage from Lewis
            Carroll's 
            <div class="emphasis e41">Alice in Wonderland</div>:
            <div class="popupBox e42">
               <div class="popupLabel" onmouseover="$('#d1e75').show('1000');" onmouseout="$('#d1e75').hide('1000');">[ blockquote ]</div>
               <div id="d1e75" style="display: none;">
                  <div class="blockquote">
                     <div class="para e43">
                        Alice was beginning to get very
                        tired of sitting by her sister on the bank,
                        and of having nothing to do: once or twice
                        she had peeped into the book her sister
                        was reading, but it had no pictures or
                        conversations in it,
                        
                        <div class="quote e44">and what is the use of a book,</div>
                        thought Alice
                        
                        <div class="quote e45">without pictures or conversation?</div>
                        
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="para e46">In its most general form, the problem of discontinuity
            is the question 
            <div class="quote e47">How can we represent this passage,
               and others like it, in a satisfactory way?
            </div>  This
            general problem takes more specific forms in the
            context of specific notations, data structures, and
            validation tools.
         </div>
         <div class="para e48">We might mark this up using 
            <div class="emphasis e49">p</div> (
            <div class="quote e50">paragraph</div>)
            and 
            <div class="emphasis e51">q</div> (
            <div class="quote e52">quotation</div>, for reported discourse)
            elements in a straightforward way:
            <div class="programlisting e53" xml:space="preserve">
               &lt;p&gt;
               Alice was beginning to get very
               tired of sitting by her sister on the bank,
               and of having nothing to do: once or twice
               she had peeped into the book her sister
               was reading, but it had no pictures or
               conversations in it,
               &lt;q&gt;and what is the use of a book,&lt;/q&gt;
               thought Alice
               &lt;q&gt;without pictures or conversation?&lt;/q&gt;
               &lt;/p&gt;
               
            </div>
         </div>
         <div class="para e54">This encoding satisfactorily distinguishes
            the narrative voice from that of the characters
            (although it does not capture the fact that
            the 
            <div class="emphasis e55">q</div> elements are to be
            read as uttered by Alice), and it allows a formatting
            application to supply quotation marks in the
            right places.
         </div>
         <div class="para e56">It does not, however, capture the
            intuitive sense the reader may have that the
            reported thoughts of Alice form a single continuous
            unitary utterance, nor the interplay and
            alternation between the two voices.  It would be
            desirable if the markup sufficed to allow some
            of the more obviously relevant inferences to
            be drawn, without losing any of the information
            provided in the original simple markup:
            <div class="itemizedlist e57">
               <div class="listitem e58">
                  <div class="para e59">This paragraph contains one (
                     <div class="emphasis e60">one</div>!)
                     quotation from Alice.
                  </div>
               </div>
               <div class="listitem e61">
                  <div class="para e62">The sentence 
                     <div class="quote e63">What is the use of a book,
                        without pictures or conversation?
                     </div> occurs
                     in the text (and should in principle be retrievable by a
                     phrase search looking for 
                     <div class="emphasis e64">book</div>
                     adjacent to 
                     <div class="emphasis e65">without</div>).
                     <div class="popupBox e66">
                        <div class="popupLabel" onmouseover="$('#d1e131').show('1000');" onmouseout="$('#d1e131').hide('1000');">[ footnote ]</div>
                        <div id="d1e131" style="display: none;">
                           <div class="footnote">
                              <div class="para e67">
                                 An anonymous reviewer points out that the XQuery and XPath
                                 Full Text specification
                                 [
                                 <div class="xref e68" linkend="add-ft"></div>]
                                 provides at least a partial solution to this problem.
                                 That is, it provides the concept of a full-text window
                                 which one could use to express the adjacency of
                                 
                                 <div class="emphasis e69">book</div> and 
                                 <div class="emphasis e70">without</div>.
                                 It does not, as far as we can tell, define a way to
                                 specify that 
                                 <div class="emphasis e71">book</div> should for
                                 some purposes be treated as adjacent to 
                                 <div class="emphasis e72">thought</div>,
                                 and for other purposes as adjacent to 
                                 <div class="emphasis e73">without</div>.
                                 It is of course not alone in this lack.  (The TauRo system
                                 now being developed at the Scuola Normale Superiore in Pisa
                                 is unusual, in our experience, in providing for declarations
                                 which specify that particular element types (
                                 <div class="quote e74">jump tags</div>)
                                 create a context switch for purposes of full-text retrieval
                                 and proximity measures.  See
                                 
                                 <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e75" xlink:actuate="onRequest" xlink:href="http://tauro.signum.sns.it/index.php" xlink:show="new" xlink:type="simple">http://tauro.signum.sns.it/index.php</div>.)
                                 
                              </div>
                           </div>
                        </div>
                     </div>
                     
                     
                  </div>
               </div>
               <div class="listitem e76">
                  <div class="para e77">That one quotation from Alice is interrupted
                     by the narrator's attribution of the thought to
                     Alice.
                  </div>
               </div>
            </div>
            
         </div>
         <div class="para e78">
            The problem encountered here is not new; it has
            been recognized for some years.
            We digress briefly here to review some earlier
            approaches to the problem, since they help illuminate
            the issues.
         </div>
         <div class="para e79">The 1990 version of the TEI Guidelines
            [
            <div class="xref e80" linkend="teip1"></div>] proposes specialized markup
            for discontinuities in the reporting of direct discourse.
            
            <div class="quote e81">Interruptions of the quotation by a narrator may be
               tagged with the tag 
               <div class="code e82">&lt;in.quot&gt;</div>.
            </div>  Using
            this element, the example would read:
            
            <div class="programlisting e83" xml:space="preserve">
               &lt;p&gt;
               Alice was beginning to get very
               tired ... but it had no pictures or
               conversations in it,
               &lt;q&gt;and what is the use of a book,&lt;in.quot&gt;
               thought Alice
               &lt;/in.quot&gt;without pictures or
               conversation?&lt;/q&gt;
               &lt;/p&gt;
               
            </div>
            The 
            <div class="emphasis e84">in.quot</div> element did not survive
            the revision of the 
            <div class="emphasis e85">Guidelines</div>.  Some readers
            may find it awkward (although this can be debated back and forth)
            because they perceive the attribution 
            <div class="quote e86">thought Alice</div>
            as an interruption or suspension of the quotation,
            and not as something embedded within (and thus in some sense
            forming part of)
            the quotation.
            The fact that a formatting application will emit
            a 
            <div class="emphasis e87">closing</div> quotation mark for the
            
            <div class="emphasis e88">start</div>-tag of 
            <div class="emphasis e89">in.quot</div>,
            and an 
            <div class="emphasis e90">opening</div> quotation mark for
            its 
            <div class="emphasis e91">end-</div>tag, may contribute to a feeling
            of unease.
            And 
            <div class="emphasis e92">in.quot</div>
            does not in any case handle all forms of
            discontinuity.
            <div class="popupBox e93">
               <div class="popupLabel" onmouseover="$('#d1e207').show('1000');" onmouseout="$('#d1e207').hide('1000');">[ footnote ]</div>
               <div id="d1e207" style="display: none;">
                  <div class="footnote">
                     <div class="para e94">In verse drama,
                        for example, speaker attributions
                        interrupt the verse structure and are not generally
                        regarded as embedded in the verse; in the latter
                        way, they differ from stage directions.
                     </div>
                  </div>
               </div>
            </div>
            
         </div>
         <div class="para e95">
            Later versions of the TEI 
            <div class="emphasis e96">Guidelines</div>
            [
            <div class="xref e97" linkend="teip3"></div>]
            define more powerful methods of encoding discontinuity.
            For certain elements (specifically, verse lines
            and text divisions), a 
            <div class="emphasis e98">part</div> attribute
            is defined, which takes the values
            
            <div class="code e99">I</div> (
            <div class="quote e100">initial</div>),
            
            <div class="code e101">M</div> (
            <div class="quote e102">medial</div>), and
            
            <div class="code e103">F</div> (
            <div class="quote e104">final</div>) (as well as
            
            <div class="code e105">Y</div> and 
            <div class="code e106">N</div> for less informative encodings).
            The unity of a discontinuous element
            can be reconstructed by taking the fragment
            with 
            <div class="code e107">part="I"</div>, followed by the
            zero or more fragments with 
            <div class="code e108">part="M"</div>,
            and concluding with 
            <div class="code e109">part="F"</div>.
            A second mechanism uses
            
            <div class="emphasis e110">next</div> and 
            <div class="emphasis e111">prev</div> attributes
            of type 
            <div class="code e112">IDREF</div> to allow each fragment of a
            whole to point at the next such fragment.
            The 
            <div class="emphasis e113">next</div> / 
            <div class="emphasis e114">prev</div> mechanism
            is more general than the 
            <div class="emphasis e115">part</div> attribute
            because it does not
            require the fragments of a discontinuous whole to appear
            in order in the larger document.
            The 
            <div class="emphasis e116">next</div> and 
            <div class="emphasis e117">prev</div> attributes
            are defined for every element type,
            if the additional tag set for linking is selected.
            Using 
            <div class="emphasis e118">next</div> and 
            <div class="emphasis e119">prev</div>,
            our example might look like this:
            
            <div class="programlisting e120" xml:space="preserve">&lt;p&gt;
               Alice was beginning to get very
               tired ... but it had no pictures or
               conversations in it,
               &lt;q id="q1" next="q2"&gt;and what is
               the use of a book,&lt;/q&gt;
               thought Alice
               &lt;q id="q2" prev="q1"&gt;without
               pictures or conversation?&lt;/q&gt;
               &lt;/p&gt;
            </div>
            A third mechanism, less convenient but more
            powerful, is the TEI's 
            <div class="emphasis e121">join</div> element,
            which creates a virtual element by joining
            fragments together.
            <div class="popupBox e122">
               <div class="popupLabel" onmouseover="$('#d1e294').show('1000');" onmouseout="$('#d1e294').hide('1000');">[ footnote ]</div>
               <div id="d1e294" style="display: none;">
                  <div class="footnote">
                     <div class="para e123">We describe
                        
                        <div class="emphasis e124">join</div> as more powerful because unlike
                        the 
                        <div class="emphasis e125">next</div> / 
                        <div class="emphasis e126">prev</div> mechanism
                        it is not limited to gluing together fragments which
                        are tagged as elements with the same generic identifier.
                        It also has the ability to specify that the target
                        elements should be treated as children, or that
                        the target elements should be disregarded and
                        their children treated as children of the virtual
                        element, which is lacking in the other mechanisms
                        described here (including TexMecs).
                     </div>
                  </div>
               </div>
            </div>
            Assuming the same IDs as just
            shown, the unitary nature of Alice's utterance
            might be encoded thus:
            
            <div class="programlisting e127" xml:space="preserve">&lt;join result="q" targets="q1 q2"
               scope="branches"/&gt;
               
            </div>
            
         </div>
      </div><a name="TexMecsnotationANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e128" xml:id="texmecs">
         <div class="title e129">TexMecs notation</div>
         <div class="para e130">Mechanisms like those defined by the TEI are not, of course,
            understood or supported by generic XML tools; they require
            vocabulary-specific support by a different
            layer of code.  One goal of
            the TexMecs notation first specified in 2001 and revised in 2003
            [
            <div class="xref e131" linkend="ref-texmecs"></div>]
            is to move such information about virtual elements
            and element discontinuity out of the application level
            and into the level of basic syntax.
            TexMecs includes a generic notation for discontinuous elements:
            in addition to start- and end-tags of the form
            
            <div class="code e132">&lt;e|</div> and 
            <div class="code e133">|e&gt;</div>, TexMecs defines
            
            <div class="quote e134">suspend-</div> (
            <div class="code e135">|-e&gt;</div>)
            and 
            <div class="quote e136">resume-</div> (
            <div class="code e137">&lt;+e|</div>) tags,
            which can be used to signal discontinuity in the element.
            
         </div>
         <div class="para e138">Using this TexMecs notation, the passage from Alice in Wonderland
            can be encoded thus:
            
            <div class="programlisting e139" xml:space="preserve">&lt;p|Alice
               was beginning to get very tired of sitting
               by her sister on the bank, and of having
               nothing to do: once or twice she had peeped
               into the book her sister was reading, but
               it had no pictures or conversations in it,
               &lt;q|and what is the use of a book,|-q&gt;
               thought Alice
               &lt;+q|without pictures or conversation?|q&gt;
               |p&gt;
            </div>
            
         </div>
         <div class="para e140">This has the modest advantage over the 
            <div class="emphasis e141">next</div> /
            
            <div class="emphasis e142">prev</div> mechanism of TEI P3 that it does not require that
            we generate unique identifiers for the fragments; it's also a bit more
            compact than the attribute-based notations.
            It shares with the other mechanisms mentioned the property of
            assuming some more abstract layer in which elements fragmented
            in the concrete syntax are treated as units, and of leaving the
            details of that more abstract layer to be specified
            elsewhere, while it focuses solely on the serialization layer.
            
         </div>
         <div class="para e143">In the MLCD project, efforts to define that more abstract layer
            have focused on the definition of generalized ordered-descendant
            directed acyclic graphs (Goddags).
            
         </div>
      </div><a name="GoddagstructuresANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e144" xml:id="goddag">
         <div class="title e145">Goddag structures</div>
         <div class="para e146">The Goddag structure is a directed acyclic graph structure
            developed by the MLCD project
            for the convenient representation of overlapping
            document structures
            [
            <div class="xref e147" linkend="ref-goddag"></div>].
         </div>
         <div class="para e148">
            Although in principle the goal of the MLCD project is to ensure that every
            TexMecs document be representable using a Goddag structure, and that every
            Goddag structure be serializable as a TexMecs document, nevertheless work to date
            on Goddag structures has not addressed the topic of discontinuous
            elements directly. The definition of Goddag structures antedated the
            specification of the TexMecs notation, and when the notation for
            discontinuous elements was added to TexMecs, we did not initially
            notice that it caused a problem for the existing rules for mapping
            documents into Goddag structures.
            
         </div>
         <div class="para e149">Our colleague Paul Meurer called our attention to
            the problem, when he discovered that his program for
            drawing diagrams of Goddag structures from TexMecs data
            [
            <div class="xref e150" linkend="ref-meurer"></div>]
            was producing output structurally different from the input
            whenever it was asked to re-serialize TexMecs examples with discontinuous
            elements.  His
            program maps the example into the Goddag
            structure shown in 
            <div class="xref e151" linkend="alice.3"></div>.
            
            <div class="figure e152" xml:id="alice.3">
               <div class="title e153">A Goddag for the Alice example</div>
               <div class="mediaobject e154">
                  <div class="imageobject e155">
                     <div class="metaBox e156"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e371').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e371" class="metaSource" style="display:none;">                
                           &lt;imagedata<span class="metaAttribute">class='e156'
                              </span><span class="metaAttribute">fileref='../../../vol1/graphics/Sperberg-McQueen01/Sperberg-McQueen01-001.png'
                              </span><span class="metaAttribute">format='png'
                              </span><span class="metaAttribute">width='100%'
                              </span>
                           &gt;
                           
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            The crossing lines here
            signal a conceptual difficulty;
            from a graph-theoretic point of view, and thus from
            the point of view of the definition of Goddag structures,
            
            <div class="xref e157" linkend="alice.3"></div> is just another way of drawing
            the graph in 
            <div class="xref e158" linkend="alice.4"></div>.
            
            <div class="figure e159" xml:id="alice.4">
               <div class="title e160">A Goddag for the Alice example, without crossing lines</div>
               <div class="mediaobject e161">
                  <div class="imageobject e162">
                     <div class="metaBox e163"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e383').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e383" class="metaSource" style="display:none;">                
                           &lt;imagedata<span class="metaAttribute">class='e163'
                              </span><span class="metaAttribute">fileref='../../../vol1/graphics/Sperberg-McQueen01/Sperberg-McQueen01-002.png'
                              </span><span class="metaAttribute">format='png'
                              </span><span class="metaAttribute">width='100%'
                              </span>
                           &gt;
                           
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            
         </div>
         <div class="para e164">That is, the 
            <div class="emphasis e165">p</div> has three children,
            in the following order:  a text node (
            <div class="quote e166">Alice was beginning ... of a book</div>),
            a 
            <div class="emphasis e167">q</div> element, and a text node (
            <div class="quote e168">thought Alice</div>);
            the 
            <div class="emphasis e169">q</div> element has two text-node children
            (
            <div class="quote e170">and what ...</div> and 
            <div class="quote e171">without ...</div>).
            This is equivalent, in turn, to the TexMecs document
            
            <div class="programlisting e172" xml:space="preserve">&lt;p|Alice
               was beginning to get very tired ...
               it had no pictures or conversations in it,
               &lt;q|and what is the use of a book,|-q&gt;
               &lt;+q|without pictures or conversation?|q&gt;
               thought Alice
               |p&gt;
            </div>
            And indeed a straightforward serialization of the
            Goddag structure into TexMecs notation is likely to produce
            this form of the document, or something similar.
            
         </div>
         <div class="para e173">These observations may be interpreted as indicating a
            problem in the serialization of Goddag structures, and
            we and our colleagues in the MLCD project have spent
            some time attempting to understand and solve the problem
            in those terms, without achieving results that we have
            found wholly satisfactory.  This paper proposes that
            in fact the problem indicated by this example lies not
            in the serialization of Goddag structures, but in the
            mapping from TexMecs into Goddag structures and in the
            definition of Goddag structures.
            
         </div>
         <div class="para e174">We can formulate the problem as we now understand it
            in slightly more abstract terms.
         </div>
         <div class="para e175">
            A discontinuous element in TexMecs has a start-tag, an end-tag, one
            or more suspend-tag / resume-tag pairs.
            Any discontinuous element 
            <div class="emphasis e176">E</div> with 
            <div class="emphasis e177">P</div> suspend/resume pairs divides the
            material appearing between the start-tag and end-tag of
            
            <div class="emphasis e178">E</div> into 2√ó
            <div class="emphasis e179">P</div>+1 sequences:
            
            <div class="itemizedlist e180">
               <div class="listitem e181">
                  <div class="para e182">
                     <div class="emphasis e183">s</div>[1] is the sequence between the start-tag and the first suspend-tag, 
                  </div>
               </div>
               <div class="listitem e184">
                  <div class="para e185">
                     <div class="emphasis e186">s</div>[2] between the first suspend-tag and the first resume-tag, 
                  </div>
               </div>
               <div class="listitem e187">
                  <div class="para e188">
                     <div class="emphasis e189">s</div>[3] between the first resume- and the second suspend-tag 
                  </div>
               </div>
               <div class="listitem e190">
                  <div class="para e191">... </div>
               </div>
               <div class="listitem e192">
                  <div class="para e193">
                     <div class="emphasis e194">s</div>[2√ó
                     <div class="emphasis e195">N</div>] is the sequence between the 
                     <div class="emphasis e196">N</div>th suspend-tag and the 
                     <div class="emphasis e197">N</div>th
                     resume-tag (for 1 ‚â§ 
                     <div class="emphasis e198">N</div> &lt; 
                     <div class="emphasis e199">P</div>)
                  </div>
               </div>
               <div class="listitem e200">
                  <div class="para e201">
                     <div class="emphasis e202">s</div>[2√ó
                     <div class="emphasis e203">N</div>+1] the sequence between the 
                     <div class="emphasis e204">N</div>th resume-tag and the 
                     <div class="emphasis e205">N</div>+1th
                     suspend-tag (for 1 ‚â§ 
                     <div class="emphasis e206">N</div> &lt; 
                     <div class="emphasis e207">P</div>)
                  </div>
               </div>
               <div class="listitem e208">
                  <div class="para e209">...</div>
               </div>
               <div class="listitem e210">
                  <div class="para e211">
                     <div class="emphasis e212">s</div>[2√ó
                     <div class="emphasis e213">P</div>+1] is the sequence between the last resume-tag and the end-tag
                  </div>
               </div>
            </div>
            For any 
            <div class="emphasis e214">i</div>, if 
            <div class="emphasis e215">i</div> is odd, 
            <div class="emphasis e216">s</div>[
            <div class="emphasis e217">i</div>] is contained within 
            <div class="emphasis e218">E</div>,
            and if 
            <div class="emphasis e219">i</div> is even, then 
            <div class="emphasis e220">s</div>[
            <div class="emphasis e221">i</div>] is not contained within 
            <div class="emphasis e222">E</div>.
            
         </div>
         <div class="para e223">
            Without loss of generality, let us consider the TexMecs document 
            <div class="emphasis e224">D</div>
            
            <div class="programlisting e225" xml:space="preserve">
               &lt;A|&lt;B|x|-B&gt;y&lt;+B|z|B&gt;|A&gt;
               
            </div>
            where sequence 
            <div class="emphasis e226">s</div>[1] contains just the character 
            <div class="quote e227">x</div>, 
            <div class="emphasis e228">s</div>[2] contains
            
            <div class="quote e229">y</div>, and 
            <div class="emphasis e230">s</div>[3] contains 
            <div class="quote e231">z</div>.  Let us refer to 
            <div class="emphasis e232">s</div>[1], 
            <div class="emphasis e233">s</div>[2], and
            
            <div class="emphasis e234">s</div>[3] as 
            <div class="emphasis e235">x</div>, 
            <div class="emphasis e236">y</div>, and 
            <div class="emphasis e237">z</div>.
            
         </div>
         <div class="para e238">
            TexMecs discontinuity is meaningful just on the assumption that
            there is some significance both to the sequence 
            <div class="emphasis e239">x</div>
            <div class="emphasis e240">z</div>
            
            and to the sequence 
            <div class="emphasis e241">x</div>
            <div class="emphasis e242">y</div>
            <div class="emphasis e243">z</div>.
            Otherwise, there is no need to make 
            <div class="emphasis e244">B</div> be discontinuous; the material
            interrupting it (i.e., 
            <div class="emphasis e245">y</div>) can be moved to one side or the other of 
            <div class="emphasis e246">B</div>.
            
         </div>
         <div class="para e247">The sequence 
            <div class="emphasis e248">x</div>
            <div class="emphasis e249">y</div>
            <div class="emphasis e250">z</div> can be preserved without difficulty in the
            data structure if the 
            <div class="emphasis e251">A</div> node has three children, in order, which are
            or contain 
            <div class="emphasis e252">x</div>, 
            <div class="emphasis e253">y</div>, and 
            <div class="emphasis e254">z</div> respectively.  Similarly, the unity of
            
            <div class="emphasis e255">B</div> can be indicated, and its contents correctly represented, if the
            
            <div class="emphasis e256">B</div> node has the two children 
            <div class="emphasis e257">x</div> and 
            <div class="emphasis e258">z</div>, in that order.  And the
            fact that 
            <div class="emphasis e259">B</div> is wholly contained within 
            <div class="emphasis e260">A</div> can be captured by
            having the 
            <div class="emphasis e261">A</div> node dominate the 
            <div class="emphasis e262">B</div> node.
         </div>
         <div class="para e263">
            It appears difficult to reconcile these different demands. The
            original description of Goddag structures
            [
            <div class="xref e264" linkend="ref-goddag"></div>, p. 151] specifies a rule we will
            call here 
            <div class="emphasis e265">R1</div>:
            
            <div class="variablelist e266">
               <div class="varlistentry e267">
                  <div class="term e268">R1</div>
                  <div class="listitem e269">
                     <div class="para e270">
                        One node
                        dominates a second if and only if the second node is completely
                        contained within the first.
                        
                     </div>
                  </div>
               </div>
            </div>
            Since 
            <div class="emphasis e271">A</div> contains 
            <div class="emphasis e272">B</div>, rule 
            <div class="emphasis e273">R1</div>
            requires that 
            <div class="emphasis e274">A</div> dominate 
            <div class="emphasis e275">B</div>. A second rule, 
            <div class="emphasis e276">R2</div>, stipulates that:
            
            <div class="variablelist e277">
               <div class="varlistentry e278">
                  <div class="term e279">R2</div>
                  <div class="listitem e280">
                     <div class="para e281">
                        No
                        node dominates another node both directly and indirectly.
                        
                     </div>
                  </div>
               </div>
            </div>
            Since
            
            <div class="emphasis e282">A</div> dominates 
            <div class="emphasis e283">B</div> and 
            <div class="emphasis e284">B</div> dominates 
            <div class="emphasis e285">x</div> and 
            <div class="emphasis e286">z</div>, 
            <div class="emphasis e287">A</div> dominates 
            <div class="emphasis e288">x</div> and
            
            <div class="emphasis e289">z</div> indirectly and is forbidden by rule 
            <div class="emphasis e290">R2</div> to dominate them directly as well.
            
         </div>
      </div><a name="ContainmentanddominanceANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e291" xml:id="c.d">
         <div class="title e292">Containment and dominance</div>
         <div class="para e293">In recent work reported elsewhere
            [
            <div class="xref e294" linkend="ref-cd"></div>], we have for other reasons
            begun to contemplate
            distinguishing more sharply than heretofore between
            
            <div class="emphasis e295">dominance</div> (regarded as the transitive closure
            of the parent/child relation).
            and
            
            <div class="emphasis e296">containment</div> (regarded as superset/subset
            relation on the leaf nodes reachable from a node by
            following parent-child arcs).
            
         </div>
         <div class="para e297">In previous work, containment and dominance have been
            regarded as near synonyms, connected by the principles 
            <div class="emphasis e298">R3</div> and 
            <div class="emphasis e299">R4</div>,
            which are a fuller and more precise statement of the same
            general idea as 
            <div class="emphasis e300">R1</div>:
            
            <div class="variablelist e301">
               <div class="varlistentry e302">
                  <div class="term e303">R3</div>
                  <div class="listitem e304">
                     <div class="para e305">If two nodes 
                        <div class="emphasis e306">A</div> and 
                        <div class="emphasis e307">B</div> each contain
                        the other (i.e. they dominate the same set of leaves), then either
                        
                        <div class="emphasis e308">A</div> dominates 
                        <div class="emphasis e309">B</div> or 
                        <div class="emphasis e310">B</div> dominates 
                        <div class="emphasis e311">A</div>.
                     </div>
                  </div>
               </div>
               <div class="varlistentry e312">
                  <div class="term e313">R4</div>
                  <div class="listitem e314">
                     <div class="para e315">Given two nodes 
                        <div class="emphasis e316">A</div> and 
                        <div class="emphasis e317">B</div> which do
                        not dominate the same set of leaves, 
                        <div class="emphasis e318">A</div> dominates 
                        <div class="emphasis e319">B</div> if and only
                        if 
                        <div class="emphasis e320">A</div> contains 
                        <div class="emphasis e321">B</div>.
                     </div>
                  </div>
               </div>
            </div>
            
         </div>
         <div class="para e322">The rationale for distinguishing more broadly
            between containment and dominance can be summarized here briefly.
            When a document contains several
            hierarchical structures, a
            purely containment-based method of deriving the Goddag structure leads
            to a confusing mixture of hierarchies:  sometimes (for example) pages
            contain paragraphs, sometimes paragraphs contain pages, and sometimes
            pages and paragraphs simply share children without either containing
            the other.  Similar things can be said about verse lines and speeches,
            in verse drama. This leads to a confusing account of the structure
            of the larger units of the document.  It is convenient to be able
            to view a chapter either as a sequence of paragraphs (oversimplifying
            slightly for brevity) or a sequence of pages; it is somewhat less
            convenient to have to view it as containing a sequence of children
            some of whom are pages, others paragraphs.  Such a mixed view offers
            little help in describing or understanding the nature of chapters,
            and still less in validating them against a document grammar.
            
         </div>
         <div class="para e323">We propose, then, to relax rules 
            <div class="emphasis e324">R3</div> and 
            <div class="emphasis e325">R4</div>.
            We propose to replace them
            by stipulating that dominance (parent-child) relations in a
            Goddag structure entail containment, but not vice versa.
            In other words:
            
            <div class="variablelist e326">
               <div class="varlistentry e327">
                  <div class="term e328">R5</div>
                  <div class="listitem e329">
                     <div class="para e330">Given two nodes 
                        <div class="emphasis e331">A</div> and 
                        <div class="emphasis e332">B</div>,
                        if 
                        <div class="emphasis e333">A</div> dominates 
                        <div class="emphasis e334">B</div>, then 
                        <div class="emphasis e335">A</div> contains 
                        <div class="emphasis e336">B</div>.
                     </div>
                  </div>
               </div>
            </div>
            But the converse implication, from containment to dominance,
            does not apply. Dominance relations are based upon some
            other criteria, which require elaboration in future work.
            At the moment, our
            best suggestion for such criteria are grammatical:  node 
            <div class="emphasis e337">A</div>
            dominates node 
            <div class="emphasis e338">B</div> only if both are first-class elements
            in some rabbit/duck grammar, and there is some rule in the grammar
            with 
            <div class="emphasis e339">A</div> on the left-hand side and 
            <div class="emphasis e340">B</div> (posssibly among other
            things) on the right-hand side.  (And, of course, 
            <div class="emphasis e341">A</div> must
            contain 
            <div class="emphasis e342">B</div>.)  In the usual case there will be several
            different grammars. Each node may, by virtue of being first-class in more than
            one of them, have several different sequences
            of children, one for each grammar; these sequences of children
            need to be distinguished somehow.
            We speculate that some Goddag-based structure analogous to the
            multi-colored trees of [
            <div class="xref e343" linkend="jagadish.etal.2004"></div>]
            may be a useful solution, but we do not have concrete results
            yet.
            
         </div>
         <div class="para e344">If we
            replace 
            <div class="emphasis e345">R3</div> and 
            <div class="emphasis e346">R4</div> with 
            <div class="emphasis e347">R5</div>,
            then there are two Goddag structures that could
            be used to describe the Alice example.  In the first, we
            adopt the rule that neither a discontinuous element (here the 
            <div class="emphasis e348">q</div>)
            nor any of its fragments is ever a child of any element
            which directly dominates
            any material between any of its suspend- / resume-tag pairs
            (here, the 
            <div class="emphasis e349">p</div>).  The result is shown in 
            <div class="xref e350" linkend="alice.5"></div>
            
            <div class="figure e351" xml:id="alice.5">
               <div class="title e352">A Goddag in which P does not dominate Q</div>
               <div class="mediaobject e353">
                  <div class="imageobject e354">
                     <div class="metaBox e355"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e878').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e878" class="metaSource" style="display:none;">                
                           &lt;imagedata<span class="metaAttribute">class='e355'
                              </span><span class="metaAttribute">fileref='../../../vol1/graphics/Sperberg-McQueen01/Sperberg-McQueen01-003.png'
                              </span><span class="metaAttribute">format='png'
                              </span><span class="metaAttribute">width='100%'
                              </span>
                           &gt;
                           
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            
         </div>
         <div class="para e356">The Goddag shown in 
            <div class="xref e357" linkend="alice.5"></div>, however,
            does not reflect our intuition as readers that the
            paragraph and the 
            <div class="emphasis e358">q</div> element are not quite so unrelated.
            From a narrative point of view, the paragraph does not
            contain just four text nodes in sequence; the
            paragraph contains text in the narrative voice
            interspersed with text in Alice's voice.  It may be
            more satisfactory, then, to treat the fragments of the
            
            <div class="emphasis e359">q</div> as themselves nodes in the Goddag structure and
            allow them, though not the discontinuous 
            <div class="emphasis e360">q</div>
            itself, to be dominated by the 
            <div class="emphasis e361">p</div>.
            
            <div class="figure e362" xml:id="alice.6">
               <div class="title e363">A Goddag in which P dominates the Q fragments</div>
               <div class="mediaobject e364">
                  <div class="imageobject e365">
                     <div class="metaBox e366"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e902').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e902" class="metaSource" style="display:none;">                
                           &lt;imagedata<span class="metaAttribute">class='e366'
                              </span><span class="metaAttribute">fileref='../../../vol1/graphics/Sperberg-McQueen01/Sperberg-McQueen01-004.png'
                              </span><span class="metaAttribute">format='png'
                              </span><span class="metaAttribute">width='100%'
                              </span>
                           &gt;
                           
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            
         </div>
         <div class="para e367">
            <div class="xref e368" linkend="alice.6"></div> conveys accurately that from one point of view
            the paragraph has four children:  two text nodes and
            two fragmentary 
            <div class="emphasis e369">q</div> elements.
         </div>
         <div class="para e370">It is not immediately obvious whether the right thing to
            do with the 
            <div class="emphasis e371">q</div> element is to make it dominate the two
            text nodes directly (as shown) or to make it dominate
            the two fragmentary 
            <div class="emphasis e372">q</div> elements which are its
            representation in the TexMecs markup.  At the moment,
            we lean toward the solution shown, on the grounds that
            if we want to treat the 
            <div class="emphasis e373">q</div> element as a unitary object
            (which was, after all, the starting point of our
            discussion), no good purpose is served by making
            it structurally anomalous.  A normal 
            <div class="emphasis e374">q</div> element
            recording the sentence 
            <div class="quote e375">What is the use of a
               book without pictures or conversations?
            </div> will
            contain textual data, not fragmentary sub-elements.
            <div class="popupBox e376">
               <div class="popupLabel" onmouseover="$('#d1e928').show('1000');" onmouseout="$('#d1e928').hide('1000');">[ footnote ]</div>
               <div id="d1e928" style="display: none;">
                  <div class="footnote">
                     <div class="para e377">That
                        the 
                        <div class="emphasis e378">q</div> element has two text-node children rather than
                        one is already an artifact of the encoding.  But like
                        many such artifacts, this one dissolves if instead of
                        positing text nodes we instead posit individual
                        characters as children of the element.  Conceptually,
                        individual character children are probably the
                        preferable approach.  We adopt the text-node approach
                        for drawing pictures, however, since it simplifies the
                        drawing task.
                     </div>
                  </div>
               </div>
            </div>  If it is desirable to make
            some connection between the nodes 
            <div class="emphasis e379">q</div>, 
            <div class="emphasis e380">q1</div>, and 
            <div class="emphasis e381">q2</div>
            explicit in the Goddag structure, it had better take
            some other form.
         </div>
      </div><a name="Rabbit/duckgrammarsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e382" xml:id="rabbit-duck">
         <div class="title e383">Rabbit/duck grammars</div>
         <div class="para e384">The MLCD project has proposed
            rabbit/duck grammars as a possible mechanism for validating
            overlapping structures
            [
            <div class="xref e385" linkend="ref-rabbit-duck"></div>].
         </div>
         <div class="para e386">Previous work on rabbit/duck grammars has not dealt
            with the validation of discontinuous elements; many questions
            remain open, and we can do nothing here but sketch
            some possible avenues of attack.
         </div>
         <div class="para e387">It seems clear that if we specify that the discontinuous
            element (
            <div class="emphasis e388">q</div> or 
            <div class="emphasis e389">B</div> in our examples) matches a normal
            (
            <div class="quote e390">first-class</div>) token in a content
            model, then the usual rules for interpreting right-hand
            sides in the production rules of context-free grammars
            do not apply:  the usual interpretation is that the
            right-hand side specifies a sequence of children for
            the left-hand side, but as described at some length
            above (section 
            <div class="xref e391" linkend="goddag"></div>)
            the discontinuous element itself 
            <div class="emphasis e392">cannot</div>
            be part of any sequence which  also contains the material which
            interrupts it.  We postulate, therefore, that discontinuous
            elements, taken as wholes, do not match first-class
            tokens in content models.  If then the content model for 
            <div class="emphasis e393">p</div> is
            
            <div class="programlisting e394" xml:space="preserve">(#PCDATA | q)*</div>
            and no further adjustments are made to the rules for
            rabbit/duck grammars,
            then the example from 
            <div class="emphasis e395">Alice in Wonderland</div>
            cannot be valid.
            
         </div>
         <div class="para e396">There seem to be two obvious alternatives, each of which
            would make the example valid.
            We could introduce a new kind of content-model token
            for fragmentary elements, allowing us to write the
            content model for 
            <div class="emphasis e397">p</div> as
            
            <div class="programlisting e398" xml:space="preserve">(#PCDATA | q | #frag(q))*</div>
            meaning that a 
            <div class="emphasis e399">p</div> element can contain 
            <div class="code e400">PCDATA</div>,
            entire 
            <div class="emphasis e401">q</div> elements, or fragmentary 
            <div class="emphasis e402">q</div> elements,
            intermixed in any order. This would allow
            the example to be valid.
         </div>
         <div class="para e403">It might be simpler, however, to allow
            fragments of a first-class element to match
            content model tokens for that element type.
            When validating the 
            <div class="emphasis e404">p</div> element in the example,
            each fragmentary 
            <div class="emphasis e405">q</div> element would match the
            
            <div class="emphasis e406">q</div> token in the content model, so the example
            would be valid against the first content model given.
            This amounts to saying: for purposes of validating
            the parent, the plusses and minus-signs in the
            suspend- and resume-tags are ignored, and they
            are treated as if they were end- and start-tags;
            only for validation of the discontinuous element
            itself does the difference between fragmentary
            element and entire element matter.
            
         </div>
         <div class="para e407">The content model for 
            <div class="emphasis e408">q</div> itself, however, should probably
            be validated against the whole discontinuous 
            <div class="emphasis e409">q</div>
            element, not against the individual fragments.
            Since conventional content models for quotations
            are likely to take a form like
            
            <div class="programlisting e410" xml:space="preserve">(#PCDATA | %phrase.mix;)*</div>
            this distinction doesn't matter for 
            <div class="emphasis e411">q</div>.
            But if we imagine a stricter content model with
            a sequence of required sub-elements, the difference
            will matter.  For example, take a conventional content model
            for 
            <div class="emphasis e412">text</div>:
            
            <div class="programlisting e413" xml:space="preserve">(front, body, back?)</div>
            and imagine a text embedded in a larger text
            which interrupts it:
            
            <div class="programlisting e414" xml:space="preserve">&lt;doc|
               &lt;p|...|p&gt;
               &lt;p|...
               &lt;text|
               &lt;front| ... |front&gt;
               &lt;body|...
               ...
               |-body&gt;|-text&gt;
               &lt;p|Just then, we were interrupted.
               ...
               |p&gt;
               &lt;+text|&lt;+body|
               ...
               |body&gt;
               |text&gt;
               ...|p&gt;
               |doc&gt;
            </div>
            As regards the discontinuous 
            <div class="emphasis e415">text</div> element,
            this document should probably be valid, not invalid.
            Validating each fragmentary 
            <div class="emphasis e416">text</div> element
            separately, however, would
            make the second 
            <div class="emphasis e417">text</div>
            fragment invalid, as it has no
            front matter.
            
         </div>
         <div class="para e418">Integrating this idea more firmly into the definition of
            validation using rabbit/duck grammars remains work for
            the future.
            
         </div>
         <div class="para e419">Another pressing task will be modifying the parsing
            algorithm for rabbit/duck grammars to integrate support
            for discontinuity.  The published algorithm
            uses Brzozowski derivatives, and it is not at all clear
            how to suspend the validation of an element while
            it is interrupted, and return when it is resumed.
            The validation of discontinuous elements would be easier
            using the graph data structure, but the only known
            algorithms for validating with rabbit/duck grammars
            rely on an event stream created by parsing TexMecs documents,
            and cannot be used on Goddag structures.
            The current working assumption
            is that Goddag structures contain no nodes for start- or
            end-tags (or any other form of tags, in languages with
            multiple forms of tags); if this assumption were
            abandoned, validation could work from the Goddag structure
            (but the structures themselves would be harder to
            define and work with).
            
         </div>
         <div class="para e420">
            It is possible that the treatment of interleave in
            Creole
            [
            <div class="xref e421" linkend="creole"></div>]
            will indicate a solution.
            Further study of the
            problem remains a task for future work.
            
         </div>
      </div><a name="RelationtootherproposalsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e422" xml:id="otherwork">
         <div class="title e423">Relation to other proposals</div>
         <div class="para e424">A few remarks may be in order on how discontinuity,
            and the proposal to distinguish between containment and
            dominance, relate to other proposals for handling overlapping
            structures.
         </div>
         <div class="para e425">LMNL, the layered markup and annotation language
            [
            <div class="xref e426" linkend="add-lmnl"></div>],
            cannot readily make a distinction between containment and
            dominance (we are indebted to a reviewer of this paper for
            this observation), and so seems unlikely to satisfy the
            competing demands which suggest to us that both concepts
            are needed.  On the other hand, there is a sense in which
            LMNL does not need to make the distinction.
            Elements in a LMNL document are in any case just ranges
            with annotations; containment relations follow from the
            arithmetic of the range start and end points, but
            no dominance relations are ever postulated except by
            some application logic.  The same applies for the unity
            of discontinuous elements:  such a unity may be
            asserted by the application layer (that is, by the
            definition of a LMNL vocabulary), but it is not visible
            on the LMNL level, and thus need not be accounted for
            at the level of LMNL itself.
         </div>
         <div class="para e427">
            The design of LMNL thus seems to require that any
            account of dominance (as distinct from containment),
            and any account of discontinuous elements, be handled
            in the application layer.  LMNL itself achieves a
            degree of simplicity and regularity as a result,
            at the expense of complexity in the application.
            
         </div>
         <div class="para e428">XCONCUR and similar mechanisms
            ([
            <div class="xref e429" linkend="add-concur"></div>],
            [
            <div class="xref e430" linkend="add-concur2006"></div>])
            already incorporate
            the containment/dominance distinction to a certain
            degree.  The usual rules for hierarchical markup ensure
            that in a set of concurrent trees, dominance entails
            containment, but the fact that two elements in a
            containment relation may be in different trees
            ensures that in systems with concurrent markup, the
            relations of containment and dominance are systematically
            separate and distinct.
            For elements in the same tree, containment and dominance are essentially
            equivalent (except for elements with identical character data content),
            and elements in different trees never have dominance relations.  But these are
            the only two choices: either two elements are both in the same tree, or
            they are not.
            The complex network of factors
            in examples like the 
            <div class="emphasis e431">q</div> and 
            <div class="emphasis e432">p</div> elements
            in the Alice example, however,
            lead us to wish both that the 
            <div class="emphasis e433">p</div> element should dominate
            the 
            <div class="emphasis e434">q</div> fragments and that it should 
            <div class="emphasis e435">not</div>
            dominate the 
            <div class="emphasis e436">q</div> element as a whole.  In cases like this,
            the either/or choice of concurrent markup can seem unsatisfactory.
            
            And like non-concurrent XML, XCONCUR has no conception
            of discontinuous elements.
            
         </div>
         <div class="para e437">Mechanisms like Trojan Horse markup
            ([
            <div class="xref e438" linkend="add-derose"></div>],
            [
            <div class="xref e439" linkend="add-bauman"></div>])
            can be used to
            serialize discontinuous elements, provided the empty
            XML elements used to mark the boundaries of virtual
            elements have ways to signal that they record
            a resumption, rather than only a beginning or end,
            of the virtual element.  Trojan Horse markup can be
            used to encode data models which make a distinction
            between containment and dominance, but it does not
            require such a distinction; its inclination is to
            leave details of the abstract model for elaboration
            by the user.  Indeed, the treatment above
            of discontinuity, dominance, and containment may be
            regarded as an attempt to make more explicit what
            Trojan Horse markup hints at without making explicit.
            
         </div>
      </div><a name="ConclusionANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e440" xml:id="concl">
         <div class="title e441">Conclusion</div>
         <div class="para e442">We have illustrated the problem of discontinuity,
            in particular the problems it raises for data structures
            intended to represent documents.
         </div>
         <div class="para e443">We have proposed that a graph structure which more
            nearly reflects our intuitions about the document can
            be constructed if we retain the principle that parent/child
            and ancestor/descendant relations imply that the ancestor
            contain the descendant, but jettison the converse principle
            that any element properly contained by another element
            is necessarily a descendant of (dominated by) that other
            element.
         </div>
         <div class="para e444">A number of questions remain open and
            will require further work:
            <div class="itemizedlist e445">
               <div class="listitem e446">
                  <div class="para e447">Can a principled set of criteria be found for assigning
                     parent/child relations to node pairs?  What are they?
                     Do the criteria apply at the meta-language level, or
                     are they a function of how document type designers specify
                     the document types they are working with?
                  </div>
               </div>
               <div class="listitem e448">
                  <div class="para e449">Can discontinuous elements be integreated into the
                     notion of validity associated with rabbit/duck grammars?
                  </div>
               </div>
               <div class="listitem e450">
                  <div class="para e451">Can the algorithms for validation with rabbit/duck grammars
                     be extended to handle discontinuous elements?
                  </div>
               </div>
               <div class="listitem e452">
                  <div class="para e453">Can the ideas of multi-colored trees be applied
                     successfully to Goddag structures?
                     
                  </div>
               </div>
            </div>
            
         </div>
      </div><a name="ReferencesANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="bibliography e454">
         <div class="title e455">References</div>
         <div class="bibliomixed e456" xml:id="teip1" xreflabel="ACH/ACL/ALLC 1990">
            Association for Computers and the Humanities,
            Association for Computational Linguistics, and
            Association for Literary and Linguistic Computing.
            1990.
            
            <div class="emphasis e457">Guidelines for the Encoding
               and Interchange of Machine-Readable Texts (TEI P1)
            </div>.
            Ed. C. M. Sperberg-McQueen and Lou Burnard.
            Chicago, Oxford: Text Encoding Initiative, 1990.
            
         </div>
         <div class="bibliomixed e458" xml:id="teip3" xreflabel="ACH/ACL/ALLC 1994">
            Association for Computers and the Humanities,
            Association for Computational Linguistics, and
            Association for Literary and Linguistic Computing.
            1994.
            
            <div class="emphasis e459">Guidelines for Electronic Text Encoding
               and Interchange (TEI P3)
            </div>.
            Ed. C. M. Sperberg-McQueen and Lou Burnard.
            Chicago, Oxford: Text Encoding Initiative, 1994.
            
         </div>
         <div class="bibliomixed e460" xml:id="add-bauman" xreflabel="Bauman 2005">
            Bauman, Syd.
            2005.
            
            <div class="quote e461">TEI HORSEing around.</div>
            In 
            <div class="emphasis e462">Proceedings of Extreme Markup Languages 2005</div>.
            On the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e463" xlink:actuate="onRequest" xlink:href="http://www.idealliance.org/papers/extreme/proceedings/html/2005/Bauman01/EML2005Bauman01.html" xlink:show="new" xlink:type="simple">http://www.idealliance.org/papers/extreme/proceedings/html/2005/Bauman01/EML2005Bauman01.html</div>
            
         </div>
         <div class="bibliomixed e464" xml:id="add-derose" xreflabel="DeRose 2004">
            DeRose, Steven J.
            2004.
            
            <div class="quote e465">Markup overlap: A review and a horse.</div>
            In 
            <div class="emphasis e466">Proceedings of Extreme Markup Languages 2004</div>.
            On the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e467" xlink:actuate="onRequest" xlink:href="http://www.idealliance.org/papers/extreme/proceedings/html/2004/DeRose01/EML2004DeRose01.html" xlink:show="new" xlink:type="simple">http://www.idealliance.org/papers/extreme/proceedings/html/2004/DeRose01/EML2004DeRose01.html</div>
            
         </div>
         <div class="bibliomixed e468" xml:id="add-concur" xreflabel="Hilbert / Schonefeld / Witt 2005">
            Hilbert, Mirco, Oliver Schonefeld, and Andreas Witt.
            2005.
            
            <div class="quote e469">Making CONCUR work.</div>
            In 
            <div class="emphasis e470">Proceedings of Extreme Markup Languages 2005</div>.
            On the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e471" xlink:actuate="onRequest" xlink:href="http://www.idealliance.org/papers/extreme/proceedings/html/2005/Witt01/EML2005Witt01.xml" xlink:show="new" xlink:type="simple">http://www.idealliance.org/papers/extreme/proceedings/html/2005/Witt01/EML2005Witt01.xml</div>
            
         </div>
         <div class="bibliomixed e472" xml:id="ref-texmecs" xreflabel="Huitfeldt/Sperberg-McQueen 2003">
            Huitfeldt, Claus, and C. M. Sperberg-McQueen.
            2003.
            
            <div class="quote e473">TexMECS:
               An experimental markup meta-language for complex documents
            </div>.
            Working paper of the project Markup Languages for Complex
            Documents (MLCD), University of Bergen.
            January 2001, rev. October 2003.
            Available on the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e474" xlink:actuate="onRequest" xlink:href="http://decentius.aksis.uib.no/mlcd/2003/Papers/texmecs.html" xlink:show="new" xlink:type="simple">http://decentius.aksis.uib.no/mlcd/2003/Papers/texmecs.html</div>
            
         </div>
         <div class="bibliomixed e475" xml:id="jagadish.etal.2004" xreflabel="Jagadish et al. 2004">
            Jagadish, H. V.,
            Laks V. S. Lakshmanan,
            Monica Scannapieco,
            Divesh Srivastava,
            and
            Nuwee Wiwatwattana.
            2004.
            
            <div class="quote e476">Colorful XML: One hierarchy isn't enough</div>.
            
            <div class="emphasis e477">Proceedings of the 2004 ACM SIGMOD International
               conference on management of data
            </div>, Paris,
            sponsored by the Association
            for Computing Machinery Special Interest Group on Management of Data.
            New York: ACM Press. doi: 
            <div class="biblioid doi e478">10.1145/1007568.1007598</div>.
            
         </div>
         <div class="bibliomixed e479" xml:id="ref-meurer" xreflabel="Meurer 2001">
            Meurer, Paul.
            2001.
            
            <div class="emphasis e480">TexMECS tester</div>.
            Web-accessible program for drawing Goddags
            from TexMecs data.
            Available on the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e481" xlink:actuate="onRequest" xlink:href="http://decentius.aksis.uib.no/cl/mlcd/texmecs-tester.html" xlink:show="new" xlink:type="simple">http://decentius.aksis.uib.no/cl/mlcd/texmecs-tester.html</div>
            
         </div>
         <div class="bibliomixed e482" xml:id="add-concur2006" xreflabel="Schonefeld / Witt 2006">
            Schonefeld, Oliver, and Andreas Witt.
            2006.
            
            <div class="quote e483">Towards validation of concurrent markup.</div>
            In 
            <div class="emphasis e484">Proceedings of Extreme Markup Languages 2006</div>.
            On the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e485" xlink:actuate="onRequest" xlink:href="http://www.idealliance.org/papers/extreme/proceedings/html/2006/Schonefeld01/EML2006Schonefeld01.html" xlink:show="new" xlink:type="simple">http://www.idealliance.org/papers/extreme/proceedings/html/2006/Schonefeld01/EML2006Schonefeld01.html</div>
            
         </div>
         <div class="bibliomixed e486" xml:id="ref-rabbit-duck" xreflabel="Sperberg-McQueen 2006">
            Sperberg-McQueen, C. M.
            2006.
            
            <div class="quote e487">Rabbit/duck grammars:
               a validation method for overlapping structures.
            </div>
            In 
            <div class="emphasis e488">Proceedings of Extreme Markup Languages 2006</div>.
            On the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e489" xlink:actuate="onRequest" xlink:href="http://www.idealliance.org/papers/extreme/proceedings/html/2006/SperbergMcQueen01/EML2006SperbergMcQueen01.html" xlink:show="new" xlink:type="simple">http://www.idealliance.org/papers/extreme/proceedings/html/2006/SperbergMcQueen01/EML2006SperbergMcQueen01.html</div>
            
         </div>
         <div class="bibliomixed e490" xml:id="ref-goddag" xreflabel="Sperberg-McQueen/Huitfeldt 2000">
            Sperberg-McQueen, C. M., and Claus Huitfeldt.
            2000.
            
            <div class="quote e491">GODDAG: A Data Structure for Overlapping Hierarchies</div>,
            paper given at Digital Documents: Systems and Principles. 8th
            International Conference on Digital Documents and Electronic
            Publishing, DDEP 2000, 5th International Workshop on the Principles of
            Digital Document Processing, PODDP 2000, Munich, Germany, September
            13-15, 2000. Published in
            
            <div class="emphasis e492">DDEP-PODDP 2000</div>, ed. P. King and E.V. Munson.
            Lecture Notes in Computer Science 2023.
            Berlin: Springer, 2004, pp. 139-160.
            Available on the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e493" xlink:actuate="onRequest" xlink:href="http://www.w3.org/People/cmsmcq/2000/poddp2000.html" xlink:show="new" xlink:type="simple">http://www.w3.org/People/cmsmcq/2000/poddp2000.html</div>
            
         </div>
         <div class="bibliomixed e494" xml:id="ref-cd" xreflabel="Sperberg-McQueen/Huitfeldt 2008">
            Sperberg-McQueen, C. M., and Claus Huitfeldt.
            2008.
            
            <div class="quote e495">Containment and dominance in Goddag structures</div>,
            paper given at the conference
            
            <div class="emphasis e496">Processing text-technological resources</div>,
            Bielefeld, March 13-15, 2008,
            organized by the Zentrum f√ºr interdisziplin√§re Forschung
            der Universit√§t Bielefeld.
            Slides (but not full text) available on the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e497" xlink:actuate="onRequest" xlink:href="http://www.w3.org/People/cmsmcq/2008/bielefeld/slides.html" xlink:show="new" xlink:type="simple">http://www.w3.org/People/cmsmcq/2008/bielefeld/slides.html</div>
            
         </div>
         <div class="bibliomixed e498" xml:id="add-lmnl" xreflabel="Tennison/Piez 2002">
            Tennison, Jeni, and Wendell Piez.
            2002.
            
            <div class="quote e499">The layered markup and annotation language (LMNL).</div>
            Late-breaking talk given at Extreme Markup Languages 2002 (not in proceedings).
            Slides on the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e500" xlink:actuate="onRequest" xlink:href="http://www.idealliance.org/papers/extreme/proceedings/author-pkg/2002/Tennison02/EML2002Tennison02.zip" xlink:show="new" xlink:type="simple">http://www.idealliance.org/papers/extreme/proceedings/author-pkg/2002/Tennison02/EML2002Tennison02.zip</div>
            
         </div>
         <div class="bibliomixed e501" xml:id="creole" xreflabel="Tennison 2007">
            Tennison, Jeni.
            2007.
            
            <div class="quote e502">Creole: Validating Overlapping Markup</div>.
            In 
            <div class="emphasis e503">Proceedings of XTech 2007</div>,
            Paris, 2007.
            Available on the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e504" xlink:actuate="onRequest" xlink:href="http://www.lmnl.org/wiki/images/8/86/Creole.zip" xlink:show="new" xlink:type="simple">http://www.lmnl.org/wiki/images/8/86/Creole.zip</div>
            
         </div>
         <div class="bibliomixed e505" xml:id="add-ft" xreflabel="W3C 2008">
            World Wide Web Consortium (W3C).
            2008.
            
            <div class="quote e506">XQuery 1.0 and XPath 2.0 Full-Text 1.0</div>,
            ed. Sihem Amer-Yahia et al.
            W3C Candidate Recommendation 16 May 2008.
            [Cambridge, Sophia-Antipolis, Tokyo]: W3C, 2007.
            Available on the Web at
            
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e507" xlink:actuate="onRequest" xlink:href="http://www.w3.org/TR/xpath-full-text-10/" xlink:show="new" xlink:type="simple">http://www.w3.org/TR/xpath-full-text-10/</div>
            
         </div>
      </div>
   </div>
</div>