<div id="mainContainerTOC">
   <div id="mainContainerTitleTOC" onclick="$('#mainContainerEntriesTOC').toggle('1000');">Table of Content</div>
   <div id="mainContainerEntriesTOC" style="display:none;">
      <div class="headedContainerTOC">
         <div class="headedContainerTitleTOC"><a href="#InvestigatingthestreamabilityofXProcpipelinesANCHOR" name="InvestigatingthestreamabilityofXProcpipelinesTOC">Investigating the streamability of XProc pipelines</a></div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#IntroductionANCHOR" name="IntroductionTOC">Introduction</a></div>
            <div class="headedContainerTOC">
               <div class="headedContainerTitleTOC"><a href="#XProcstepsANCHOR" name="XProcstepsTOC">XProc steps</a></div>
            </div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#StreamabilityANCHOR" name="StreamabilityTOC">Streamability</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#XMLCalabashANCHOR" name="XMLCalabashTOC">XML Calabash</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#CollectingdataaboutrealworldpipelinesANCHOR" name="CollectingdataaboutrealworldpipelinesTOC">Collecting data about real world pipelines</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#DatacollectedANCHOR" name="DatacollectedTOC">Data collected</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#DataaggregationANCHOR" name="DataaggregationTOC">Data aggregation</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#DataanalysisANCHOR" name="DataanalysisTOC">Data analysis</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#ConclusionsANCHOR" name="ConclusionsTOC">Conclusions</a></div>
         </div>
         <div class="headedContainerTOC">
            <div class="headedContainerTitleTOC"><a href="#CaveatsANCHOR" name="CaveatsTOC">Caveats</a></div>
         </div>
      </div>
   </div>
</div>
<div id="mainContainerTERMS">
   <div id="mainContainerTitleTERMS" onclick="$('#mainContainerEntriesTERMS').toggle('1000')">Index of Terms</div>
   <div id="mainContainerEntriesTERMS" style="display:none;">
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">a</div>
         <div class="singletermTERMS">August 11 - 14, 2009</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">b</div>
         <div class="singletermTERMS">Balisage: The Markup Conference 2009</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">c</div>
         <div class="singletermTERMS">can not</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">d</div>
         <div class="singletermTERMS">DocBook: The Definitive Guide</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">e</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">f</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">g</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">h</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">i</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">j</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">k</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">l</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">m</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">n</div>
         <div class="singletermTERMS">never</div>
         <div class="singletermTERMS">Norman</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">o</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">p</div>
         <div class="singletermTERMS">p:identity</div>
         <div class="singletermTERMS">p:delete</div>
         <div class="singletermTERMS">p:xslt</div>
         <div class="singletermTERMS">p:exec</div>
         <div class="singletermTERMS">p:http-request</div>
         <div class="singletermTERMS">p:validate-with-relaxng</div>
         <div class="singletermTERMS">p:validate-with-schematron</div>
         <div class="singletermTERMS">p:validate-with-xml-schema</div>
         <div class="singletermTERMS">p:xquery</div>
         <div class="singletermTERMS">Principal Technologist</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">q</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">r</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">s</div>
         <div class="singletermTERMS">source pipelines</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">t</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">u</div>
         <div class="singletermTERMS">unique</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">v</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">x</div>
         <div class="singletermTERMS">XProc: An XML Pipeline Language</div>
         <div class="singletermTERMS">XML Calabash</div>
         <div class="singletermTERMS">XProc: An XML Pipeline Language</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">y</div>
      </div>
      <div class="letterContainerTERMS">
         <div class="letterlableTERMS">z</div>
      </div>
   </div>
</div>
<div id="mainContainerIML"><a name="InvestigatingthestreamabilityofXProcpipelinesANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="article e0" version="5.0-subset Balisage-1.2">
      <div class="title e1">Investigating the streamability of XProc pipelines</div>
      <div class="info e2">
         <div class="confgroup e3">
            <div class="conftitle e4">Balisage: The Markup Conference 2009</div>
            <div class="confdates e5">August 11 - 14, 2009</div>
         </div>
         <div class="abstract e6">
            <div class="para e7">
               <div class="emphasis e8">XProc: An XML Pipeline Language</div> is a
               specification being developed by the W3C for describing a sequence of
               XML operations performed over a set of input documents. Not all of the
               steps in XProc are known to streamable and consequently,
               the XProc specification does not require implementations to support
               streaming.
            </div>
            <div class="para e9">It's an open question whether or not a streaming implementation
               would be likely to achieve significant performance improvements over a
               similar non-streaming implementation. Using data collected from
               real-world pipelines, this paper examines that question.
            </div>
         </div>
         <div class="author e10">
            <div class="personname e11">
               <div class="firstname e12">Norman</div>
               <div class="surname e13">Walsh</div>
            </div>
            <div class="personblurb e14">
               <div class="para e15">Norman Walsh is a Principal Technologist in the Information
                  &amp; Media group at Mark Logic Corporation where he assists in the
                  design and deployment of advanced content applications. Norm is also
                  an active participant in a number of standards efforts worldwide: he
                  is chair of the XML Processing Model Working Group at the W3C where he
                  is also co-chair of the XML Core Working Group. At OASIS, he is chair
                  of the DocBook Technical Committee.
                  
               </div>
               <div class="para e16">Before joining Mark Logic, he participated in XML-related
                  projects and standards efforts at Sun Microsystems. With more than a
                  decade of industry experience, Mr. Walsh is well known for his work on
                  DocBook and a wide range of open source projets. He is the principle
                  author of 
                  <div class="emphasis e17">DocBook: The Definitive Guide</div>
                  
               </div>
            </div>
            <div class="affiliation e18">
               <div class="jobtitle e19">Principal Technologist</div>
               <div class="orgname e20">Mark Logic Corporation</div>
            </div>
         </div>
         <div class="legalnotice e21">
            <div class="para e22">Copyright © 2009 Norman Walsh</div>
         </div>
      </div><a name="IntroductionANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e23" xml:id="intro">
         <div class="title e24">Introduction</div>
         <div class="para e25">XProc is a language for expressing a pipeline of XML operations. One
            simple example of the sort of use cases that XProc is designed to meet is
            this pipeline:
         </div>
         <div class="programlisting e26" xml:space="preserve">&lt;p:pipeline xmlns:p="http://www.w3.org/ns/xproc"&gt;
            &lt;p:xinclude/&gt;
            &lt;p:validate-with-xml-schema&gt;
            &lt;p:input port="schema"&gt;
            &lt;p:document href="/uri/of/schema.xsd"/&gt;
            &lt;/p:input&gt;
            &lt;/p:validate-with-xml-schema&gt;
            &lt;p:xslt&gt;
            &lt;p:input port="stylesheet"&gt;
            &lt;p:document href="/uri/of/stylesheet.xsl"/&gt;
            &lt;/p:input&gt;
            &lt;/p:xslt&gt;
            &lt;/p:pipeline&gt;
         </div>
         <div class="para e27">This pipeline performs XInclude processing, validates the
            expanded document, applies a stylesheet to it, and returns the result
            of the transformation.
         </div><a name="XProcstepsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e28" xml:id="steps">
            <div class="title e29">XProc steps</div>
            <div class="para e30">The XProc specification defines 31 required and 10 optional steps,
               summarized in 
               <div class="xref e31" linkend="tab.steps"></div>.
            </div>
            <div class="table e32" xml:id="tab.steps">
               <div class="caption e33">
                  <div class="para e34">The XProc Standard Step Library</div>
               </div>
               <div class="tr e35">
                  <div class="td e36">p:add-attribute</div>
                  <div class="td e37">p:http-request</div>
                  <div class="td e38">p:set-attributes</div>
                  <div class="td e39">p:wrap-sequence</div>
               </div>
               <div class="tr e40">
                  <div class="td e41">p:add-xml-base</div>
                  <div class="td e42">p:identity</div>
                  <div class="td e43">p:sink</div>
                  <div class="td e44">p:wrap</div>
               </div>
               <div class="tr e45">
                  <div class="td e46">p:compare</div>
                  <div class="td e47">p:insert</div>
                  <div class="td e48">p:split-sequence</div>
                  <div class="td e49">p:www-form-urldecode
                     <div class="superscript e50">*</div>
                  </div>
               </div>
               <div class="tr e51">
                  <div class="td e52">p:count</div>
                  <div class="td e53">p:label-elements</div>
                  <div class="td e54">p:store</div>
                  <div class="td e55">p:www-form-urlencode
                     <div class="superscript e56">*</div>
                  </div>
               </div>
               <div class="tr e57">
                  <div class="td e58">p:delete</div>
                  <div class="td e59">p:load</div>
                  <div class="td e60">p:string-replace</div>
                  <div class="td e61">p:xinclude</div>
               </div>
               <div class="tr e62">
                  <div class="td e63">p:directory-list</div>
                  <div class="td e64">p:make-absolute-uris</div>
                  <div class="td e65">p:unescape-markup</div>
                  <div class="td e66">p:xquery
                     <div class="superscript e67">*</div>
                  </div>
               </div>
               <div class="tr e68">
                  <div class="td e69">p:error</div>
                  <div class="td e70">p:namespace-rename</div>
                  <div class="td e71">p:unwrap</div>
                  <div class="td e72">p:xsl-formatter
                     <div class="superscript e73">*</div>
                  </div>
               </div>
               <div class="tr e74">
                  <div class="td e75">p:escape-markup</div>
                  <div class="td e76">p:pack</div>
                  <div class="td e77">p:uuid
                     <div class="superscript e78">*</div>
                  </div>
                  <div class="td e79">p:xslt</div>
               </div>
               <div class="tr e80">
                  <div class="td e81">p:exec
                     <div class="superscript e82">*</div>
                  </div>
                  <div class="td e83">p:parameters</div>
                  <div class="td e84">p:validate-with-relax-ng
                     <div class="superscript e85">*</div>
                  </div>
               </div>
               <div class="tr e86">
                  <div class="td e87">p:filter</div>
                  <div class="td e88">p:rename</div>
                  <div class="td e89">p:validate-with-schematron
                     <div class="superscript e90">*</div>
                  </div>
               </div>
               <div class="tr e91">
                  <div class="td e92">p:hash
                     <div class="superscript e93">*</div>
                  </div>
                  <div class="td e94">p:replace</div>
                  <div class="td e95">p:validate-with-xml-schema
                     <div class="superscript e96">*</div>
                  </div>
               </div>
               <div class="tr e97">
                  <div class="td e98" colspan="4">
                     
                     <div class="superscript e99">*</div> An optional step.
                  </div>
               </div>
            </div>
            <div class="para e100">For more details about the nature of XProc pipelines, see
               
               <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e101" xlink:actuate="onRequest" xlink:href="http://www.w3.org/TR/xproc/" xlink:show="new" xlink:type="simple">XProc: An XML Pipeline
                  Language
               </div>.
            </div>
         </div>
      </div><a name="StreamabilityANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e102" xml:id="streamability">
         <div class="title e103">Streamability</div>
         <div class="para e104">When XProc development first began, there were a lot of opinions
            about streamability. Some people suggested the constraint that all
            XProc steps must be streamable. Others suggested only that they should
            be streamable.
         </div>
         <div class="para e105">In the end, the working group determined that it would impose no
            streamability constraints on implementations. Instead it would attempt
            to define steps such that it was (at least usually) possible to stream
            them and leave the actual streamability as a quality of implementation
            issue.
         </div>
         <div class="para e106">There seems to be an informal consensus that a streaming
            implementation would be expected to outperform a similar non-streaming
            implementation. In the particular case of XProc, the author believes
            that this depends significantly on the extent to which real world
            pipelines are composed of streamable steps.
         </div>
         <div class="para e107">The standard XProc steps can be divided roughly into three
            categories: those for which a streaming can always be achieved (e.g.,
            
            <div class="code e108">p:identity</div>), those for which streaming can often be
            achieved (e.g., 
            <div class="code e109">p:delete</div>), and those for which no
            general, streaming implementation is known (e.g.,
            
            <div class="code e110">p:xslt</div>).
         </div>
         <div class="para e111">The distinction between the first and second catagories amounts
            to the question of XPath streamability. The 
            <div class="code e112">p:delete</div> step,
            for example, is streamable precisely to the extent that the XPath
            expression used to select the nodes to be deleted is
            streamable.
         </div>
         <div class="para e113">Taking an optimistic view, this paper assumes that if a step
            could be streamable then it is. This won't always be true, of course,
            but taking that view will establish an upper bound on the number of
            streamable pipelines.
         </div>
         <div class="para e114">With that in mind, we assume that the following steps 
            <div class="emphasis e115">can
               not
            </div> be streamed:
            
            <div class="code e116">p:exec</div>,
            
            <div class="code e117">p:http-request</div>,
            
            <div class="code e118">p:validate-with-relaxng</div>,
            
            <div class="code e119">p:validate-with-schematron</div>,
            
            <div class="code e120">p:validate-with-xml-schema</div>,
            
            <div class="code e121">p:xquery</div>, and
            
            <div class="code e122">p:xslt</div>. We assume that all other steps can be streamed.
         </div>
      </div><a name="XMLCalabashANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e123" xml:id="calabash">
         <div class="title e124">XML Calabash</div>
         <div class="para e125">
            <div xmlns:xlink="http://www.w3.org/1999/xlink" class="link e126" xlink:actuate="onRequest" xlink:href="http://xmlcalabash.com/" xlink:show="new" xlink:type="simple">XML Calabash</div>
            is the author's implementation of XProc. XML Calabash is written in
            Java and is built on top of the Saxon 9 APIs. The author's principle
            motivation for writing XML Calabash is to demonstrate a complete and
            correct implementation. Demonstrating at least two complete and
            correct implementations of every feature is a necessary prerequisite
            for getting XProc approved as a W3C Recommendation.
         </div>
         <div class="para e127">At the present time, XML Calabash (version 0.9.13) evaluates all
            pipelines in a linear, non-streaming, single-threaded fashion. Future
            versions of XML Calabash may provide streaming and multi-threading,
            though high performance is not a stated goal at this time.
         </div>
      </div><a name="CollectingdataaboutrealworldpipelinesANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e128" xml:id="collecting-data">
         <div class="title e129">Collecting data about real world pipelines</div>
         <div class="para e130">XML Calabash has a feature for collecting information about
            actual pipelines that are being used. By default, XML Calabash sends a
            simple report about each pipeline that it runs back to a central
            server. This report includes some basic information about the pipeline
            and a list of each step that was run and the order in which they were
            run.
         </div>
         <div class="para e131">In the interests of privacy, XML Calabash
            
            <div class="emphasis e132">never</div> collects any information about the
            documents that are processed by the pipeline. Users who feel
            uncomfortable about this data collection service can disable it
            completely.
         </div>
      </div><a name="DatacollectedANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e133" xml:id="data">
         <div class="title e134">Data collected</div>
         <div class="para e135">This paper reports on the data collected by XML Calabash between
            21&nbsp;Dec&nbsp;2008 and 11&nbsp;Jul&nbsp;2009. During that period,
            data was collected on more than 294,000 pipeline runs.
         </div>
         <div class="figure e136" xml:id="fig.data-runsperweek">
            <div class="title e137">Runs per week</div>
            <div class="mediaobject e138">
               <div class="imageobject e139">
                  <div class="metaBox e140"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e267').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e267" class="metaSource" style="display:none;">                
                        &lt;imagedata<span class="metaAttribute">class='e140'
                           </span><span class="metaAttribute">fileref='../../../vol3/graphics/Walsh01/Walsh01-001.png'
                           </span><span class="metaAttribute">format='png'
                           </span>
                        &gt;
                        
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="para e141">Ignoring the outliners, this data shows reasonably steady growth in
            XML Calabash usage.
         </div>
         <div class="figure e142" xml:id="fig.runs-per-week">
            <div class="title e143">Runs per week</div>
            <div class="mediaobject e144">
               <div class="imageobject e145">
                  <div class="metaBox e146"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e275').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e275" class="metaSource" style="display:none;">                
                        &lt;imagedata<span class="metaAttribute">class='e146'
                           </span><span class="metaAttribute">fileref='../../../vol3/graphics/Walsh01/Walsh01-002.png'
                           </span><span class="metaAttribute">format='png'
                           </span><span class="metaAttribute">width='100%'
                           </span>
                        &gt;
                        
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div><a name="DataaggregationANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e147" xml:id="aggregation">
         <div class="title e148">Data aggregation</div>
         <div class="para e149">
            <div class="xref e150" linkend="fig.data"></div> presents a summary of the raw data,
            showing for each step how many times it was used in the data
            collected.
         </div>
         <div class="figure e151" xml:id="fig.data">
            <div class="title e152">Summary of the raw data</div>
            <div class="mediaobject e153">
               <div class="imageobject e154">
                  <div class="metaBox e155"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e288').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e288" class="metaSource" style="display:none;">                
                        &lt;imagedata<span class="metaAttribute">class='e155'
                           </span><span class="metaAttribute">fileref='../../../vol3/graphics/Walsh01/Walsh01-003.png'
                           </span><span class="metaAttribute">format='png'
                           </span>
                        &gt;
                        
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="para e156">Not shown in that table are the errors: 396 pipelines failed
            with static errors, 7778 failed with dynamic errors.
         </div>
         <div class="para e157">The whole collection of pipeline reports includes many runs of
            the same pipeline. So while there are almost 300,000 runs over six
            months, there are no where near that many distinct pipelines. The
            reports have a very consistent structure. This consistency allows us
            to easily identify duplicate runs.
         </div>
         <div class="para e158">What is a duplicate run? Two runs are considered to be the same
            if they come from the same IP address and perform the same steps in
            the same order at runtime. Note that this does not mean that the
            
            <div class="emphasis e159">source pipelines</div> were necessarily the same,
            though it's certainly likely that most duplicate runs are from the
            same pipeline. Note also that the same pipeline might produce runs of
            different lengths when presented with different data.
         </div>
         <div class="para e160">Our analysis reveals that there are 3,994 distinct runs in the
            data collected. Many pipelines run only a single step, but one
            pipeline ran 4,051 steps. (For an average of 73.8 steps/pipeline.)
         </div>
         <div class="figure e161" xml:id="fig.run-length">
            <div class="title e162">Length of pipeline run in steps</div>
            <div class="mediaobject e163">
               <div class="imageobject e164">
                  <div class="metaBox e165"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e305').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e305" class="metaSource" style="display:none;">                
                        &lt;imagedata<span class="metaAttribute">class='e165'
                           </span><span class="metaAttribute">fileref='../../../vol3/graphics/Walsh01/Walsh01-004.png'
                           </span><span class="metaAttribute">format='png'
                           </span><span class="metaAttribute">width='100%'
                           </span>
                        &gt;
                        
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="para e166">Figure 
            <div class="xref e167" linkend="fig.run-length"></div> plots each unique pipeline
            against the length of its run, sorted by length of run. Plots of different
            ranges of this graph show a very similar structure.
         </div>
         <div class="para e168">It's an open question whether analysis of the
            
            <div class="emphasis e169">unique</div> runs is more or less valuable than
            analysis of all the runs. Using only the unique runs biases against
            pipelines that were run many times, for which performance could be an
            important factor. Using all the data baises against distinct runs that
            occurred only once.
         </div>
         <div class="para e170">Since the focus of this paper is on the characteristics of XProc
            in general, and not the efficiencies of individual pipelines, the
            balance of this paper consideres only the set of unique pipeline
            runs.
         </div>
      </div><a name="DataanalysisANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e171" xml:id="analysis">
         <div class="title e172">Data analysis</div>
         <div class="para e173">Now let us consider the streamability of a pipeline. At one
            extreme, if a pipeline consists entirely of steps which cannot be
            streamed, then streaming offers no advantage for that pipeline. At the
            other extreme, if a pipeline consists entirely of streamable steps,
            then streaming would offer the most possible benefit for that
            pipeline. In the middle are those pipelines that contain a mixture of
            streamable and non-streamable steps.
         </div>
         <div class="para e174">For a collection of pipeline runs that are “n” steps long, we
            can compute three values: the length of the longest streamable subpipeline,
            the length of the shortest streamable subpipeline, and the corresponding
            average length. From this data, we obtain
            
            <div class="xref e175" linkend="fig.stream-length"></div>.
         </div>
         <div class="figure e176" xml:id="fig.stream-length">
            <div class="title e177">Streamable Subpipeline Length</div>
            <div class="mediaobject e178">
               <div class="imageobject e179">
                  <div class="metaBox e180"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e331').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e331" class="metaSource" style="display:none;">                
                        &lt;imagedata<span class="metaAttribute">class='e180'
                           </span><span class="metaAttribute">fileref='../../../vol3/graphics/Walsh01/Walsh01-005.png'
                           </span><span class="metaAttribute">format='png'
                           </span><span class="metaAttribute">width='100%'
                           </span>
                        &gt;
                        
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="para e181">(A small number of runs consisting of thousands of steps significantly
            reduced the readability of the graph; they have been elided.)
         </div>
         <div class="para e182">
            <div class="xref e183" linkend="fig.stream-length-200"></div> shows a magnified version of
            the first portion of this graph.
         </div>
         <div class="figure e184" xml:id="fig.stream-length-200">
            <div class="title e185">Streamable Subpipeline Length (for pipelines shorter than 200 steps)</div>
            <div class="mediaobject e186">
               <div class="imageobject e187">
                  <div class="metaBox e188"><img src="resources/manbluflag.jpg" class="metaImage" onclick="$('#d1e342').toggle('1000');" alt="Marker: click here for details..." title="Marker: click here for details..."><div id="d1e342" class="metaSource" style="display:none;">                
                        &lt;imagedata<span class="metaAttribute">class='e188'
                           </span><span class="metaAttribute">fileref='../../../vol3/graphics/Walsh01/Walsh01-006.png'
                           </span><span class="metaAttribute">format='png'
                           </span><span class="metaAttribute">width='100%'
                           </span>
                        &gt;
                        
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <div class="para e189">With respect to our earlier simlifying assumption that all steps
            that can be streamed are streamed, a casual inspection of the actual match
            patterns used revealed that to be true at least 80% of the time.
         </div>
      </div><a name="ConclusionsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e190" xml:id="conclusions">
         <div class="title e191">Conclusions</div>
         <div class="para e192">The preliminary analysis performed when this paper was proposed
            suggested that less than half “real world” pipelines would benefit
            from a streaming implementation.
         </div>
         <div class="para e193">The data above seems to indicate that the benefits may be
            considerably larger than that. Although it is clear that there are
            piplines for which streaming wouldn't offer significant advantages,
            it's equally clear that for essentially any set of pipelines of a
            given length, there are pipelines which would be almost entirely
            streamble.
         </div>
         <div class="para e194">Perhaps the most interesting aspect of this analysis is the fact
            that as pipeline runs grow longer, they appear to become more and more
            amenable to streaming. That is to say, it appears that a pipeline that
            runs to 300 steps is, on average, more likely to benefit from
            streaming than one that's only 100 steps long.
         </div>
         <div class="para e195">We have not yet had a chance to investigate why this is the case.
            
         </div>
      </div><a name="CaveatsANCHOR" href="#mainContainerTitleTOC" class="anchor">toc</a><div class="section e196" xml:id="caveats">
         <div class="title e197">Caveats</div>
         <div class="para e198">In the interests of openness, it should
            be noted that there are several weaknesses in the data.
         </div>
         <div class="orderedlist e199">
            <div class="listitem e200">
               <div class="para e201">The data is collected on an “opt-out” basis. That makes it very difficult
                  to publish the raw data. Without explicit consent from users, I'm reluctant.
                  On the other hand, it's likely that much less data would be available if an
                  explicit, “opt-in” approach had been taken.
               </div>
            </div>
            <div class="listitem e202">
               <div class="para e203">The XProc specification is currently a Candidate Recommendation.
                  Today's users represent the very leading edge of adoption. It's not
                  obvious that the usage patterns apparent in this data will accurately
                  reflect the usage that occurs when XProc is widely adopted.
               </div>
            </div>
         </div>
      </div>
   </div>
</div>